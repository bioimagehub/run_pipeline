<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <meta name="description" content=""> <meta name="keywords" content=" "> <title>System | NIS-Elements</title> <link rel="stylesheet" type="text/css" href="../css/syntax.css"> <link rel="stylesheet" type="text/css" href="../css/font-awesome.min.css"> <link rel="stylesheet" type="text/css" href="../css/bootstrap.min.css"> <link rel="stylesheet" type="text/css" href="../css/modern-business.css"> <link rel="stylesheet" type="text/css" href="../css/customstyles.css"> <link rel="stylesheet" type="text/css" href="../css/boxshadowproperties.css"> <link rel="stylesheet" type="text/css" href="../css/ekko-lightbox.min.css"> <link rel="stylesheet" type="text/css" href="../css/ne.css"> <script src="../js/jquery.min.js"></script> <script src="../js/jquery.cookie.min.js"></script> <script src="../js/jquery.navgoco.min.js"></script> <script src="../js/bootstrap.min.js"></script> <script src="../js/ekko-lightbox.min.js"></script> <script src="../js/lightbox.js"></script> <script src="../js/lim_help.js"></script> <script src="../js/jscopy.js"></script> <link rel="shortcut icon" href="../images/favicon_ne.ico""> <link rel="alternate" type="application/rss+xml" title="" href="/feed.xml"> </head> <body> <!-- find project homepage --> <!-- Navigation --> <nav class="navbar navbar-inverse navbar-static-top"> <div class="container-fluid topnavlinks"> <ul class="nav navbar-nav navbar-left"> <!-- separate search window: --> <!--<li><a onclick='window.open("SearchWindow.html","Search","toolbar=0,location=0,directories=0,status=0,menubar=0,top=100,left=100,height=800,width=600");'><img src="images/zoomimage.svg" class="icon"/></a></li>--> <!-- embedded iframe search window: --> <li class="pull-right"> <a href="search.html?frompage=task.system_section.html" id="searchButton" class="searchButton btn btn-primary" title="Search"> <img src="../images/zoomimage.svg" class="icon"/> </a> <div class="searchButtonWrapper"> </div> </li> <li> <a class="fa fa-lg navbar-brand" href="man.html" alt="NIS-Elements"> <img src="../images/logo_ne.svg"/> </a> </li> <!-- entries without drop-downs appear here --> <li><a href="man.html">User Manual</a></li> <li><a href="cr.html">Menu Commands</a></li> <li class="dropdown active"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">Applications<b class="caret"></b></a> <ul class="dropdown-menu"> <li><a href="gpa.html">GPA</a></li> <li><a href="nis.ai.html">NIS.ai</a></li> <li><a href="measurement.3d.html">3D Measurement</a></li> <li><a href="analysis.modules.html">Bio Analysis Modules</a></li> <li><a href="app.concrete.html">Concrete</a></li> <li><a href="database.html">Database</a></li> <li><a href="app.deconvolution.html">Deconvolution</a></li> <li><a href="app.edf.html">Extended Depth of Focus</a></li> <li><a href="app.filters.html">Filter Particle Analysis</a></li> <li><a href="app.fret.html">FRET</a></li> <li><a href="app.ga3.html">General Analysis 3 </a></li> <li><a href="ug.hcajobs.html">HCA</a></li> <li><a href="app.hdr.html">HDR</a></li> <li><a href="GS_HowTo.IlluminationSequence.html">Illumination Sequence</a></li> <li><a href="ug.jobs.html">JOBS and HCA</a></li> <li><a href="app.layers.html">Layer Thickness Measurement</a></li> <li><a href="app.sequencer.html">Measurement Sequencer</a></li> <li><a href="app.metalo.castiron.html">Metalo - Cast Iron Analysis</a></li> <li><a href="app.metalo.grainsize.html">Metalo - Grain Size Analysis</a></li> <li><a href="app.nstorm.html">N-STORM</a></li> <li><a href="howto.triggeredacquisition.html">Triggered Acquisition</a></li> <li><a href="app.objectclassifier.html">Object Classifier</a></li> <li><a href="app.se.html">Smart Experiment</a></li> <li><a href="howto.tracking.html">Tracking</a></li> <li><a href="app.welds.html">Weld Measurement</a></li> </ul> </li> <li><a href="fr.html">Macro Functions</a></li> <!-- toggle sidebar button --> <!-- <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Nav</a></li> --> </ul> </div> <!-- /.container --> </nav> <!-- Page Content --> <div class=""> <div id="main" class="fixedPage"> <!-- Sidebar Column --> <div class="fixedSidebar" id="tg-sb-sidebar"> <!--<p>--> <ul id="mysidebar" class="nav"> <li class="sidebarTitle">NIS-Elements AR </li> <li class="sidebarSub "> <a title="JOBS and HCA" href="ug.jobs.html">JOBS and HCA</a> </li> <li class=" hidearrow"><a title="Introduction to the JOBS Module" href="jobs.overview.html">Introduction to the JOBS Module</a> <ul> </ul> </li> <li class=" hidearrow"><a title="Basic Job Rules" href="jobs.basic.rules.html">Basic Job Rules</a> <ul> </ul> </li> <li class=" hidearrow"><a title="Creating a Job" href="jobs.creating.html">Creating a Job</a> <ul> </ul> </li> <li class=" "><a title="Merging Different Acquisition Types" href="p2c15s4.html">Merging Different Acquisition Types</a> <ul> <li><a title="Simple Acquisition Tasks Inside a Parent Loop" href="p2c15s4s1.html">Simple Acquisition Tasks Inside a Parent Loop</a></li> <li><a title="Merging Matching Z-Stacks" href="p2c15s4s2.html">Merging Matching Z-Stacks</a></li> <li><a title="(Not) Merging Z-Stacks Different for Each Point" href="merging.different.zstacks.html">(Not) Merging Z-Stacks Different for Each Point</a></li> <li><a title="Multi-point inside Multi-Point Loop" href="p2c15s4s4.html">Multi-point inside Multi-Point Loop</a></li> </ul> </li> <li class=" hidearrow"><a title="Running a Job, Viewing Results and Graphs" href="hca.viewresults.html">Running a Job, Viewing Results and Graphs</a> <ul> </ul> </li> <li class=" hidearrow"><a title="GA3 After Acquisition" href="p2c15s6.html">GA3 After Acquisition</a> <ul> </ul> </li> <li class=" hidearrow"><a title="Analysis" href="jobs.run.analysis.html">Analysis</a> <ul> </ul> </li> <li class=" hidearrow"><a title="Labels and Metadata" href="labels.and.metadata.html">Labels and Metadata</a> <ul> </ul> </li> <li class=" "><a title="Advanced Topics" href="jobs.advanced.features.html">Advanced Topics</a> <ul> <li><a title="Job Database" href="hca.db.html">Job Database</a></li> <li><a title="SMTP Configuration for Sending Email/SMS Messages" href="jobs.smtp.setup.html">SMTP Configuration for Sending Email/SMS Messages</a></li> <li><a title="Advanced Files Import" href="jobs.advanced.import.html">Advanced Files Import</a></li> </ul> </li> <li class=" "><a title="Use Cases" href="p2c15s10.html">Use Cases</a> <ul> <li><a title="Analysis Use Cases" href="p2c15s10s1.html">Analysis Use Cases</a></li> <li><a title="Using Conditions" href="jobs_introduction_to_conditions.html">Using Conditions</a></li> <li><a title="Using Expressions" href="jobs_introduction_to_expressions.html">Using Expressions</a></li> <li><a title="Using Questions" href="jobs.introduction.to.questions.html">Using Questions</a></li> <li><a title="Using Time Lapse" href="tl_temp_heat_use_case.html">Using Time Lapse</a></li> <li><a title="Creating PFS Surface" href="jobs_PFS_surface.html">Creating PFS Surface</a></li> </ul> </li> <li class=" "><a title="Tasks" href="jobs.tasks.html">Tasks</a> <ul> <li><a title="Well Plates" href="task.wellplates_section.html">Well Plates</a></li> <li><a title="Sample Holder" href="task.sampleholder_section.html">Sample Holder</a></li> <li><a title="Time Series" href="task.timeseries_section.html">Time Series</a></li> <li><a title="Stage XY Points" href="task.stagexy_section.html">Stage XY Points</a></li> <li><a title="Large Images" href="tasks.largeimages.html">Large Images</a></li> <li><a title="Z-Stack" href="task.zstack.group_section.html">Z-Stack</a></li> <li><a title="ROIs" href="task.rois_section.html">ROIs</a></li> <li><a title="Autofocus + Focus Surface" href="task.autofocus.group_section.html">Autofocus + Focus Surface</a></li> <li><a title="PFS" href="task.pfs.group_section.html">PFS</a></li> <li><a title="Acquisition" href="task.acquisition_section.html">Acquisition</a></li> <li><a title="Stimulation" href="task.stimulation_section.html">Stimulation</a></li> <li><a title="Optical Configurations" href="task.opticalconfigurations_section.html">Optical Configurations</a></li> <li><a title="Conditions" href="task.conditions_section.html">Conditions</a></li> <li class="active"><a title="System" href="task.system_section.html">System</a></li> <li><a title="Analysis" href="tasks.analysis.html">Analysis</a></li> <li><a title="GA3 Processing" href="ga3.tasks.all.html">GA3 Processing</a></li> <li><a title="Device Control" href="task.devicecontrol_section.html">Device Control</a></li> </ul> </li> <!--if you aren't using the accordion, uncomment this block:--> <!--<p class="external"> <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a> </p>--> </ul> <!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.--> <script>$("li.active").parents('li').toggleClass("active");</script> </div> <!-- Content Column --> <div class="fixedContent" id="tg-sb-content"> <div id="invalidHash"></div> <div class="section folder"><div class="titlepage"><div><div><h3 class="title"><a name="task.system_section"></a><a name="task.system"></a>System<button class="xmlid" data-clipboard-text="id|task.system_sectionx">üîó</button></h3></div></div></div><div class="itemizedlist menutree"><ul class="itemizedlist menutree" type="disc"><li class="listitem"><p><a class="link" href="task.system_section.html#task.question"> Question <img src="../res/base/warning_or_question.png"></a></p></li><li class="listitem page"><p><a class="link" href="task.system_section.html#task.macro"> Macro <img src="../res/base/jobs/macro.png"></a></p></li><li class="listitem page"><p><a class="link" href="task.system_section.html#task.pythonscript"> PythonScript <img src="../res/base/jobs/python.png"></a></p></li><li class="listitem"><p><a class="link" href="task.system_section.html#task.expression"> Expression <img src="../res/base/jobs/expression.png"></a></p></li><li class="listitem"><p><a class="link" href="task.system_section.html#task.variables"> Variables <img src="../res/base/jobs/variable.png"></a></p></li><li class="listitem"><p><a class="link" href="task.system_section.html#task.custom.metadata"> Custom Metadata <img src="../res/base/jobs/form.png"></a></p></li><li class="listitem"><p><a class="link" href="task.system_section.html#task.wait"> Wait <img src="../res/base/jobs/wait.png"></a></p></li><li class="listitem"><p><a class="link" href="task.system_section.html#task.comment"> Comment <img src="../res/base/jobs/comment.png"></a></p></li><li class="listitem"><p><a class="link" href="task.system_section.html#task.emailnotification"> Send E-mail Notification <img src="../res/base/send.png"></a></p></li><li class="listitem"><p><a class="link" href="task.system_section.html#task.smsnotification"> Send SMS Notification <img src="../res/base/send_sms.png"></a></p></li><li class="listitem"><p><a class="link" href="task.system_section.html#task.define.labels"> Create Labels <img src="../res/base/jobs/label_settings.png"></a></p></li><li class="listitem"><p><a class="link" href="task.system_section.html#task.set.label"> Assign Label <img src="../res/base/jobs/label.png"></a></p></li><li class="listitem"><p><a class="link" href="task.system_section.html#task.set.class"> Set Class <img src="../res/base/jobs/set_class.png"></a></p></li><li class="listitem"><p><a class="link" href="task.system_section.html#task.debug"> Debug <img src="../res/base/debug.png"></a></p></li><li class="listitem"><p><a class="link" href="task.system_section.html#task.phase"> Phase <img src="../res/base/jobs/phase.png"></a></p></li><li class="listitem"><p><a class="link" href="task.system_section.html#task.finish"> Finish <img src="../res/base/jobs/job_finish.png"></a></p></li><li class="listitem"><p><a class="link" href="task.system_section.html#task.abort"> Abort <img src="../res/base/jobs/job_cancel.png"></a></p></li><li class="listitem"><p><a class="link" href="task.system_section.html#task.executemacroafterrun"> Execute Macro After Run <img src="../res/base/jobs/macro_after_run.png"></a></p></li><li class="listitem"><p><a class="link" href="task.system_section.html#task.executepythonafterrun"> Execute Python After Run <img src="../res/base/jobs/python_after_run.png"></a></p></li><li class="listitem"><p><a class="link" href="task.system_section.html#task.backupafterrun"> Backup After Run <img src="../res/base/jobs/db_backup_after_run.png"></a></p></li><li class="listitem"><p><a class="link" href="task.system_section.html#task.bypassdatabase"> Alternative Storage Location <img src="../res/base/save_as.png"></a></p></li><li class="listitem"><p><a class="link" href="task.system_section.html#task.storage"> Storage <img src="../res/base/jobs/alternative_store.png"></a></p></li><li class="listitem"><p><a class="link" href="task.system_section.html#task.block"> Block <img src="../res/base/jobs/block.png"></a></p></li><li class="listitem"><p><a class="link" href="task.system_section.html#task.exitwitherror"> Exit with Error <img src="../res/base/device/stop.png"></a></p></li><li class="listitem"><p><a class="link" href="task.system_section.html#task.alternatefilename"> Alternate_FileName <img src="../res/base/jobs/storage.png"></a></p></li></ul></div><div class="variablelist commands"><dl><div class="varlistentry"><span class="term"><a name="task.question"></a><a name="d0e110441"></a>System &gt; <img src="../res/base/warning_or_question.png" height="12.5"> Question<button class="xmlid" data-clipboard-text="id|task.questionx">üîó</button></span> <p></p><table class="taskTable table"><tr class="taskRow"><td><div class="inline"><p>Displays a pop-up window requiring user interaction. After <span class="quote">‚Äú<span class="quote">answering</span>‚Äù</span> by clicking one of the buttons, the job continues.</p></div><div class="example inline"><p>Use this task to stop the job sequence and let the user decide what to do next. Please see <a class="xref" href="jobs.introduction.to.questions.html">Using Questions</a> in the electronic help for detailed examples.</p></div></td><td class="requiresTd"></td></tr></table><p> </p><div class="sidebar"><div class="figure"><a data-toggle="lightbox" data-gallery="default" href="../img/eng/task_question.png" title="" data-title=" "><img class="img-responsive" src="../img/eng/task_question.png" alt="../img/eng/task_question.png image"></a><p class="title"><b>Figure&nbsp;1191.&nbsp;</b></p></div></div><p> </p><div class="variablelist reference"><dl><div class="varlistentry"><span class="term">Name</span> <p>Name your question.</p></div><div class="varlistentry"><span class="term">Show Preview...</span> <p>Displays the preview window showing how the defined question will look like.</p></div><div class="varlistentry"><span class="term">Icon</span> <p>Choose an icon which will be displayed together with your question. Four graphics are available: Information, Question, Exclamation and Error.</p></div><div class="varlistentry"><span class="term">Caption</span> <p>Type a text to be used in the dialog window heading.</p></div><div class="varlistentry"><span class="term">Wait for user action</span> <p>Stops the job sequence until the user answers the question. If the <span class="guilabel">Keep visible during current loop execution</span> option is selected, the question stays visible during the loop execution even after user input.</p></div><div class="varlistentry"><span class="term">Timeout (for ENTER key)</span> <p>If there is no interaction from the user in the specified time, the question is confirmed and the job automatically continues.</p></div><div class="varlistentry"><span class="term">Continue execution and stay visible</span> <p>If checking this option, the question shows up and the job continues even without user interaction.</p></div><div class="varlistentry"><span class="term">Input Values</span> <p>Check if you want to input any user data (e.g. defined in <a class="link" href="task.system_section.html#task.variables"><span class="emphasis"><em>System &gt; <img src="../res/base/jobs/variable.png"> Variables</em></span></a><a name="d0e110532"></a>). Click the <img src="../res/base/plus.png" height="12.5"> <span class="guilabel">Add New</span> button and select the variable. Name of the selected variable can be set in the Text field. To change the variable, click <span class="guibutton">...</span>.</p></div><div class="varlistentry"><span class="term">Buttons</span> <div class="variablelist"><dl><div class="varlistentry"><span class="term">Combination Presets</span> <p>Here you can choose some predefined button combinations.</p></div><div class="varlistentry"><span class="term">Label</span> <p>Define the button names to be displayed when the question is to be answered.</p></div><div class="varlistentry"><span class="term">Escape Key, </span><span class="term">Enter Key</span> <p>Select which buttons will correspond to <span class="keycap"><strong>Esc</strong></span> and <span class="keycap"><strong>Enter</strong></span> key-strokes.</p></div></dl></div></div><div class="varlistentry"><span class="term"><img src="../res/base/plus.png" height="12.5"> Add New</span> <p>Adds a new button.</p></div><div class="varlistentry"><span class="term"><img src="../res/base/trash.png" height="12.5"> Remove the button</span> <p>Removes the selected button.</p></div><div class="varlistentry"><span class="term"><img src="../res/base/trash_all.png" height="12.5"> Remove All</span> <p>Removes all buttons.</p></div></dl></div><p>For more information about using Questions please see: <a class="xref" href="jobs.introduction.to.questions.html">Using Questions</a>.</p></div><div class="varlistentry page"><span class="term"><a name="task.macro"></a><a name="d0e110604"></a>System &gt; <img src="../res/base/jobs/macro.png" height="12.5"> Macro<button class="xmlid" data-clipboard-text="id|task.macrox">üîó</button></span> <p></p><table class="taskTable table"><tr class="taskRow"><td><div class="inline"><p>This task enables the user to write and run a macro. The whole set of available macro commands can be used.</p></div><div class="example inline"><p>Write sophisticated C-like scripts for tasks which cannot be done by a Job or reuse your existing macro. Please see <a class="xref" href="GS_Macros.html"><i>Macros</i></a> in the electronic help.</p></div></td><td class="requiresTd"></td></tr></table><p><b>Using Job Parameters within the Macro Task&nbsp;</b><br></p><div class="sidebar"><div class="figure"><a data-toggle="lightbox" data-gallery="default" href="../img/eng/task_macro_example_1.png" title="" data-title="Macro job example 1 "><img class="img-responsive" src="../img/eng/task_macro_example_1.png" alt="../img/eng/task_macro_example_1.png image"></a><p class="title"><b>Figure&nbsp;1192.&nbsp;Macro job example 1</b></p></div></div><p>This example job generates a point set (pattern of points on a well plate) without moving the stage. The embedded macro fills the point set with x and y coordinates of the center of each well from the well selection. Obtained points can be used later in a different job for a fast acquisition.</p><div class="sidebar"><div class="figure"><a data-toggle="lightbox" data-gallery="default" href="../img/eng/task_macro_example_2.png" title="" data-title="Macro job example 2 "><img class="img-responsive" src="../img/eng/task_macro_example_2.png" alt="../img/eng/task_macro_example_2.png image"></a><p class="title"><b>Figure&nbsp;1193.&nbsp;Macro job example 2</b></p></div></div><p>This example job has similar functionality as the <a class="link" href="task.timeseries_section.html#task.keepobjectinview"><span class="emphasis"><em>Time Series &gt; <img src="../res/base/jobs/keep_object_in_view.png"> Keep Object In View</em></span></a><a name="d0e110653"></a> task following the object of interest and keeping it in the center of the camera FOV. In this specific job, three manually selected objects are followed for an amount of time set in the <a class="link" href="task.timeseries_section.html#task.timelapseloop"><span class="emphasis"><em>Time Series &gt; <img src="../res/base/jobs/loop_time.png"> Time Lapse</em></span></a><a name="d0e110662"></a>. The first macro defines the variables and declares objective calibration. Then the three points are manually marked using the <a class="link" href="task.stagexy_section.html#task.predefinedpoints"><span class="emphasis"><em>Stage XY Points &gt; <img src="../res/base/jobs/pointset.png"> Predefined Points</em></span></a><a name="d0e110671"></a> task. <a class="link" href="task.stagexy_section.html#task.points"><span class="emphasis"><em>Stage XY Points &gt; <img src="../res/base/jobs/loop_pointset.png"> Loop over Points</em></span></a><a name="d0e110680"></a> is performed once and thresholding defined in the <a class="link" href="tasks.analysis.html#task.general.analysis"><span class="emphasis"><em>Analysis &gt; <img src="../res/base/plugins/analysis_GA2.png"> General Analysis</em></span></a><a name="d0e110689"></a> is used for identifying the objects of interest. The second macro sets the objects initial position into the predefined variables. The third macro finds the current x and y position of the center of the object and shifts the stage to these coordinates. Then it updates the objects position in the point set with the current position.</p><p>Another example of using a macro job can be found here: <code class="function"><a class="link" href="p4c4s21.html#FR_Jobs_SetFilenamePart">Jobs_SetFilenamePart</a></code>.</p></div><div class="varlistentry page"><span class="term"><a name="task.pythonscript"></a><a name="d0e110702"></a>System &gt; <img src="../res/base/jobs/python.png" height="12.5"> PythonScript<button class="xmlid" data-clipboard-text="id|task.pythonscriptx">üîó</button></span> <p></p><table class="taskTable table"><tr class="taskRow"><td><div class="inline"><p>This task enables users to write scripts in the Python language in places where the one-line <a class="link" href="task.system_section.html#task.expression"><span class="emphasis"><em>System &gt; <img src="../res/base/jobs/expression.png"> Expression</em></span></a><a name="d0e110723"></a> task does not provide enough room for a more sophisticated code. The task executes the Python function <span class="quote">‚Äú<span class="quote">run</span>‚Äù</span> defined in the python script. User can access the Job and Macro parameters, captured images and import and use many python libraries (which can be installed to the <span class="productname">NIS-Elements</span> Python folder).</p></div><div class="example inline"></div></td><td class="requiresTd"></td></tr></table><p>User can define parameters of the task (NewParam) that are visible to other tasks in the job and to itself during the run. The parameters are initialized to specified values before the job is executed.</p><p>After the code is modified click <span class="guibutton">Apply</span>. The code gets evaluated and any errors are displayed in the box below the editor.</p><p>The Python code must:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>import <span class="emphasis"><em>limjob</em></span> and</p></li><li class="listitem"><p>define a <span class="emphasis"><em>run</em></span> function (with this exact signature) at the module level.</p></li></ul></div><pre class="synopsis">import limjob

def run(imgs: tuple[limjob.Image], Job: limjob.JobParam, macro: limjob.MacroParam, ctx: limjob.RunContext):
    pass
</pre><div class="variablelist"><p class="title"><b>Inputs</b></p><dl><div class="varlistentry"><span class="term">imgs: tuple[limjob.Image]</span> <p>Access image defined in Input Images, index is given by ‚Äú#‚Äù.</p><p>Call method array() to get data (read only) as 4D numpy.ndarray (Z, Y, X, Component).</p></div><div class="varlistentry"><span class="term">Job: limjob.JobParam</span> <p>Access Job parameters, you can edit simple variables (numbers, strings).</p><p>Same syntax as in the <a class="link" href="task.system_section.html#task.expression"><span class="emphasis"><em>System &gt; <img src="../res/base/jobs/expression.png"> Expression</em></span></a><a name="d0e110781"></a> task.</p></div><div class="varlistentry"><span class="term">macro: limjob.MacroParam</span> <p>‚Äì access global variables defined via <span class="productname">NIS-Elements</span> macro language.</p><p>Same as <span class="guilabel">Variables</span> in the <a class="link" href="task.system_section.html#task.expression"><span class="emphasis"><em>System &gt; <img src="../res/base/jobs/expression.png"> Expression</em></span></a><a name="d0e110804"></a> task.</p></div><div class="varlistentry"><span class="term">ctx: limjob.RunContext</span> <p>Currently not implemented.</p></div></dl></div><div class="variablelist"><dl><div class="varlistentry"><span class="term">Input Images</span> <p>Add new image by clicking on <span class="quote">‚Äú<span class="quote">+</span>‚Äù</span>, then select image in drop-down menu. You can select any image from task before in list. To access image and image data in python, see variable <span class="quote">‚Äú<span class="quote">imgs</span>‚Äù</span> in function <span class="quote">‚Äú<span class="quote">run</span>‚Äù</span> definition in python code. Currently image access is limited by loop. To access image put Python task and task generating image to same loop level.</p></div><div class="varlistentry"><span class="term">Task Parameters</span> <p>Add new parameter by clicking on <span class="quote">‚Äú<span class="quote">+</span>‚Äù</span>, then define name, type and initial value of parameter. Initial value is evaluated as python code. For example, for initializing float array you can write both [0, 1, 2, 3, 4], and range(0,5). Parameters are reinitialized on JOB program start. Parameters of this task can be accessed for read and write by this and by other tasks (e.g Expression). To edit array in python, you have to set whole array.</p><pre class="synopsis">Job.PythonScript.NewParam = (0, 1, 2, 3, 4)</pre></div><div class="varlistentry"><span class="term">DeviceManager API</span> <p>There are currently implemented few <span class="quote">‚Äú<span class="quote">global</span>‚Äù</span> functions which can be called inside function run. Please note, that this API is experimental and may be changed completely in next version. Parameters and returned values are in micrometres.</p><pre class="synopsis">XY_GetPosition() -&gt; Tuple[float, float]
XY_Move(x: float, y: float) -&gt; None
XY_MoveRelative(x: float, y: float) -&gt; None
Z_GetPosition() -&gt; float
Z_Move(z: float) -&gt; None
Z_MoveRelative(z: float) -&gt; None
</pre></div><div class="varlistentry"><span class="term">PointSet</span> <p>limjob.PointSetParam class has dedicated methods for simple insertion of points.</p><pre class="synopsis">append(x: float|list[float], y: float|list[float], z: float|list[float] = None) -&gt; None
set(x: float|list[float], y: float|list[float], z: float|list[float] = None) -&gt; None
</pre></div><div class="varlistentry"><span class="term">Image</span> <p>limjob.Image class has these methods and parameters.</p><pre class="synopsis">componentCount: int
bitsPerComponent: int
size: tuple[int, int, int]
calibration: tuple[float, float, float]
alignment: int
calibrated: tuple[bool, bool, bool]
units: tuple[str, str, str]
transformPxToStage(x: float|list[float], y: float|list[float]) -&gt; tuple[float|list[float], float|list[float]]
array() -&gt; ndarray
</pre><div class="warning"><h3 class="title">Warning</h3><p>Warning: Currently, <span class="productname">NIS-Elements</span> functions do not take numpy datatypes as input parameters so these have to be converted to classic python integers or floats.</p></div></div></dl></div><div class="variablelist"><p class="title"><b>Examples</b></p><dl><div class="varlistentry"><span class="term">Analyzing captured image and storing points</span> <p></p><pre class="synopsis">import limjob
import numpy as np

def run(imgs, Job, macro, ctx):
    img = imgs[0]
    img_data = img.array()[0, :, :, 0]
    t = np.max(img_data)
    pixels = np.argwhere(img_data == t)[0]
    (x,y) = (float(pixels[1]), float(pixels[0]))
    (x,y) = img.transformPxToStage(x, y)
    Job.NewPointSet.PointSet.append(x, y)
</pre></div><div class="varlistentry"><span class="term">Moving microscope to selected point</span> <p></p><pre class="synopsis">import limjob

def run(imgs, Job, macro, ctx):
    if len(Job.NewPointSet.PointSet.Positions):
        stg = Job.NewPointSet.PointSet.Positions[0].Position.Stage
        XY_Move(stg.x, stg.y)
</pre></div></dl></div><p></p></div><div class="varlistentry"><span class="term"><a name="task.expression"></a><a name="d0e110895"></a>System &gt; <img src="../res/base/jobs/expression.png" height="12.5"> Expression<button class="xmlid" data-clipboard-text="id|task.expressionx">üîó</button></span> <p></p><table class="taskTable table"><tr class="taskRow"><td><div class="inline"><p>Assigns values to variables available within the job.</p></div><div class="example inline"><p>Can be used to modify settings of any task, manipulate motorized devices, etc. For more information about working with expressions please see <a class="xref" href="jobs_introduction_to_expressions.html">Using Expressions</a> in the electronic help.</p></div></td><td class="requiresTd"></td></tr></table></div><div class="varlistentry"><span class="term"><a name="task.variables"></a><a name="d0e110922"></a>System &gt; <img src="../res/base/jobs/variable.png" height="12.5"> Variables<button class="xmlid" data-clipboard-text="id|task.variablesx">üîó</button></span> <p></p><table class="taskTable table"><tr class="taskRow"><td><div class="inline"><p>Declares global variables within <span class="productname">NIS-Elements</span>. In programming, a global variable is a variable accessible from anywhere in the application (<span class="application"> <span class="productname">NIS-Elements</span> </span> in this case) unlike a local variable which is accessible in a limited scope (such as a macro function).</p></div><div class="example inline"><p>Global variables declared by this task can be accessed e.g. by task <a class="link" href="task.system_section.html#task.macro"><span class="emphasis"><em>System &gt; <img src="../res/base/jobs/macro.png"> Macro</em></span></a><a name="d0e110958"></a>.</p></div></td><td class="requiresTd"></td></tr></table><div class="variablelist reference"><dl><div class="varlistentry"><span class="term"><img src="../res/base/plus.png" height="12.5"> Add new</span> <p>Add a new variable to the list.</p></div><div class="varlistentry"><span class="term"><img src="../res/base/trash.png" height="12.5"> Remove the variable</span> <p>Removes the selected row.</p></div><div class="varlistentry"><span class="term"><img src="../res/base/trash_all.png" height="12.5"> Remove All</span> <p>Clears the whole list of variables.</p></div><div class="varlistentry"><span class="term">Variable name</span> <p>Name your variable.</p></div><div class="varlistentry"><span class="term">Type</span> <p>Choose the numeric type of your variable.</p><div class="variablelist"><dl><div class="varlistentry"><span class="term">Integer</span> <p>Integral number</p></div><div class="varlistentry"><span class="term">Double</span> <p>Real number</p></div><div class="varlistentry"><span class="term">String</span> <p>Sequence of characters.</p></div></dl></div></div><div class="varlistentry"><span class="term">Array</span> <p>If selected, the variable will be of the type <span class="quote">‚Äú<span class="quote">array</span>‚Äù</span> which usually contains a set of values of the selected <span class="guilabel">Type</span>.</p></div><div class="varlistentry"><span class="term">Current value</span> <p>A value can be assigned to the variable within this task or within task <a class="link" href="task.system_section.html#task.expression"><span class="emphasis"><em>System &gt; <img src="../res/base/jobs/expression.png"> Expression</em></span></a><a name="d0e111038"></a>.</p></div><div class="varlistentry"><span class="term">Always Initiate</span> <p>Each variable keeps its value after the job is finished. Initialization resets the variable value to <span class="guilabel">Initial Value</span> at the beginning of the job.</p></div><div class="varlistentry"><span class="term">Initial value</span> <p>Set your initial variable value.</p></div><div class="varlistentry"><span class="term">Number of Elements</span> <p>If the <span class="guilabel">Array</span> option is selected, define the number of values which can fit in the array here.</p></div></dl></div></div><div class="varlistentry"><span class="term"><a name="task.custom.metadata"></a><a name="d0e111069"></a>System &gt; <img src="../res/base/jobs/form.png" height="12.5"> Custom Metadata<button class="xmlid" data-clipboard-text="id|task.custom.metadatax">üîó</button></span> <p></p><table class="taskTable table"><tr class="taskRow"><td><div class="inline"><p>Enables the user to enter custom metadata to be used before (in wizard) or during the job run. Metadata can be created and managed in the <span class="guilabel">Manage Custom Metadata</span> dialog window (see <a class="xref" href="labels.and.metadata.html#task.labelwells.setcategories">Defining and Setting Metadata</a>). Defined metadata of different types (e.g. numeric value, text, selection, date, ...) are grouped into metadata sets and stored in the database. Metadata information applied by this task during the job are recorded into the job results and into the corresponding captured images.</p></div><div class="example inline"><p>Define your labels and quantities in the job wizard and use them later on in a multiple well plate job.</p></div></td><td class="requiresTd"></td></tr></table><div class="sidebar"><div class="figure"><a data-toggle="lightbox" data-gallery="default" href="../img/eng/task_custom_metadata.png" title="" data-title=" "><img class="img-responsive" src="../img/eng/task_custom_metadata.png" alt="../img/eng/task_custom_metadata.png image"></a><p class="title"><b>Figure&nbsp;1194.&nbsp;</b></p></div></div><div class="variablelist reference"><dl><div class="varlistentry"><span class="term">Jobrun Name</span> <p>Custom name of the jobrun.</p></div><div class="varlistentry"><span class="term">Jobrun Description</span> <p>Custom description of the jobrun.</p></div><div class="varlistentry"><span class="term">Custom Metadata</span> <p>If checked, custom metadata will be used. Select a metadata set and choose which metadata from this set will be used from the neighboring combo box. Active metadata values can be adjusted in the edit boxes below depending on the use of this task in your job definition.</p></div><div class="varlistentry"><span class="term">Presets</span> <p>Presets defined in the <span class="guilabel">Presets</span> tab of <span class="guilabel">Manage Custom Metadata</span> (see: <a class="xref" href="labels.and.metadata.html#task.labelwells.setcategories">Defining and Setting Metadata</a>) are displayed here as buttons for quick switching between them.</p></div></dl></div></div><div class="varlistentry"><span class="term"><a name="task.wait"></a><a name="d0e111137"></a>System &gt; <img src="../res/base/jobs/wait.png" height="12.5"> Wait<button class="xmlid" data-clipboard-text="id|task.waitx">üîó</button></span> <p></p><table class="taskTable table"><tr class="taskRow"><td><div class="inline"><p>This task pauses the job for a specified amount of time.</p></div><div class="example inline"><p>Use this task whenever your job experiment needs a time pause, e.g. when illumination prolongs the sample emission.</p></div></td><td class="requiresTd"></td></tr></table><div class="sidebar"><div class="figure"><a data-toggle="lightbox" data-gallery="default" href="../img/eng/task_wait.png" title="" data-title=" "><img class="img-responsive" src="../img/eng/task_wait.png" alt="../img/eng/task_wait.png image"></a><p class="title"><b>Figure&nbsp;1195.&nbsp;</b></p></div></div><div class="variablelist reference"><dl><div class="varlistentry"><span class="term">Name</span> <p>Name of your Wait task.</p></div><div class="varlistentry"><span class="term">Duration</span> <p>Amount of time for which the job will be paused.</p></div></dl></div></div><div class="varlistentry"><span class="term"><a name="task.comment"></a><a name="d0e111180"></a>System &gt; <img src="../res/base/jobs/comment.png" height="12.5"> Comment<button class="xmlid" data-clipboard-text="id|task.commentx">üîó</button></span> <p></p><table class="taskTable table"><tr class="taskRow"><td><div class="inline"><p>This task can be used for adding constantly visible notes / comments right into the job sequence.</p></div><div class="example inline"><p>Use this task to write down information explaining the particular job procedure to a user seeing the job for the first time.</p></div></td><td class="requiresTd"></td></tr></table></div><div class="varlistentry"><span class="term"><a name="task.emailnotification"></a><a name="d0e111205"></a>System &gt; <img src="../res/base/send.png" height="12.5"> Send E-mail Notification<button class="xmlid" data-clipboard-text="id|task.emailnotificationx">üîó</button></span> <p></p><table class="taskTable table"><tr class="taskRow"><td><div class="inline"><p>Sends an email to the specified address. SMTP server configuration (within the task) must be correct.</p></div><div class="example inline"><p>Use this task to send results of the experiment, messages about the experiment progress (failed, finished, in progress, ... ), etc.</p></div></td><td class="requiresTd"></td></tr></table><div class="sidebar"><div class="figure"><a data-toggle="lightbox" data-gallery="default" href="../img/eng/task_email_notification.png" title="" data-title=" "><img class="img-responsive" src="../img/eng/task_email_notification.png" alt="../img/eng/task_email_notification.png image"></a><p class="title"><b>Figure&nbsp;1196.&nbsp;</b></p></div></div><div class="variablelist reference"><dl><div class="varlistentry"><span class="term">To</span> <p>Enter the recipient's e-mail address.</p></div><div class="varlistentry"><span class="term">Email Setup...</span> <p>This function opens the <span class="guilabel">SMTP Configuration</span> window (please see <a class="link" href="jobs.menu.html#CR__SMTPConfig"><span class="emphasis"><em>HCA/JOBS &gt; Presets &gt; Email Setup</em></span></a><a name="d0e111252"></a> <span>).</span></p></div><div class="varlistentry"><span class="term">Subject</span> <p>Type the subject of your e-mail.</p></div><div class="varlistentry"><span class="term">Send Now</span> <p>This function allows you to send your e-mail immediately.</p></div><div class="varlistentry"><span class="term">Text Box</span> <p>Here you can type your message combined with your job variables.</p></div><div class="varlistentry"><span class="term">...</span> <p>The <span class="guilabel">... </span>button on the right side adjacent to the text box enables the user to insert job variables. You can also use your custom variables defined in the <span class="guilabel">Variables</span> task<span> (see <a class="link" href="task.system_section.html#task.variables"><span class="emphasis"><em>System &gt; <img src="../res/base/jobs/variable.png"> Variables</em></span></a><a name="d0e111295"></a>)</span>.</p></div></dl></div><p>Examples: Notification about the Job experiment end, notification to exchange well plates, notification that auto focus failed, etc.</p></div><div class="varlistentry"><span class="term"><a name="task.smsnotification"></a><a name="d0e111305"></a>System &gt; <img src="../res/base/send_sms.png" height="12.5"> Send SMS Notification<button class="xmlid" data-clipboard-text="id|task.smsnotificationx">üîó</button></span> <p></p><table class="taskTable table"><tr class="taskRow"><td><div class="inline"><p>Sends a text message to the specified phone number if the particular mobile phone operator provides such services (sending SMS over email).</p></div><div class="example inline"><p>Send notifications about variables changing during the experiment (e.g. temperature in the incubator).</p></div></td><td class="requiresTd"></td></tr></table><div class="sidebar"><div class="figure"><a data-toggle="lightbox" data-gallery="default" href="../img/eng/task_sms_notification.png" title="" data-title=" "><img class="img-responsive" src="../img/eng/task_sms_notification.png" alt="../img/eng/task_sms_notification.png image"></a><p class="title"><b>Figure&nbsp;1197.&nbsp;</b></p></div></div><div class="variablelist reference"><dl><div class="varlistentry"><span class="term">Phone Number</span> <p>Type the recipient's phone number.</p></div><div class="varlistentry"><span class="term">Carrier</span> <p>Select the local mobile operator of the entered <span class="guilabel">Phone number</span>.</p></div><div class="varlistentry"><span class="term">Send Now</span> <p>This function allows you to send your SMS immediately.</p></div><div class="varlistentry"><span class="term">Email Setup...</span> <p>This function opens the <span class="guilabel">SMTP Configuration</span> window (see <a class="link" href="jobs.menu.html#CR__SMTPConfig"><span class="emphasis"><em>HCA/JOBS &gt; Presets &gt; Email Setup</em></span></a><a name="d0e111367"></a> ).</p></div><div class="varlistentry"><span class="term">Text Box</span> <p>Here you can type your message combined with your job variables.</p></div><div class="varlistentry"><span class="term">...</span> <p>The <span class="guilabel">... </span>button on the right side adjacent to the text box enables the user to insert job variables. You can also use your custom variables defined in the <span class="guilabel">Variables</span> task <span>(see <a class="link" href="task.system_section.html#task.variables"><span class="emphasis"><em>System &gt; <img src="../res/base/jobs/variable.png"> Variables</em></span></a><a name="d0e111396"></a>)</span>.</p></div></dl></div></div><div class="varlistentry"><span class="term"><a name="task.define.labels"></a><a name="d0e111404"></a>System &gt; <img src="../res/base/jobs/label_settings.png" height="12.5"> Create Labels<button class="xmlid" data-clipboard-text="id|task.define.labelsx">üîó</button></span> <p></p><table class="taskTable table"><tr class="taskRow"><td><div class="inline"><p>This task defines labels which can be used for labeling single wells or single points during runtime.</p></div><div class="example inline"><p>Define labels to be used to mark contents of the wells of a well plate.</p></div></td><td class="requiresTd"></td></tr></table><div class="sidebar"><div class="figure"><a data-toggle="lightbox" data-gallery="default" href="../img/eng/define_labels.png" title="" data-title=" "><img class="img-responsive" src="../img/eng/define_labels.png" alt="../img/eng/define_labels.png image"></a><p class="title"><b>Figure&nbsp;1198.&nbsp;</b></p></div></div><p>Add labels by clicking the <span class="guibutton">Select Labels...</span> button or by clicking the <img src="../res/base/plus.png" height="12.5"> <span class="guilabel">Add New</span>. Set their name and choose the labeling color. You must use the <a class="link" href="task.system_section.html#task.set.label"><span class="emphasis"><em>System &gt; <img src="../res/base/jobs/label.png"> Assign Label</em></span></a><a name="d0e111446"></a> task to assign these settings.</p></div><div class="varlistentry"><span class="term"><a name="task.set.label"></a><a name="d0e111453"></a>System &gt; <img src="../res/base/jobs/label.png" height="12.5"> Assign Label<button class="xmlid" data-clipboard-text="id|task.set.labelx">üîó</button></span> <p></p><table class="taskTable table"><tr class="taskRow"><td><div class="inline"><p>This task assigns labels set in <a class="link" href="task.system_section.html#task.define.labels"><span lang="" class="emphasis"><em>System &gt; <img src="../res/base/jobs/label_settings.png"> Create Labels</em></span></a><a name="d0e111474"></a> to wells or points during runtime.</p></div><div class="example inline"><p>Use this task with a <a class="link" href="task.system_section.html#task.question"><span class="emphasis"><em>System &gt; <img src="../res/base/warning_or_question.png"> Question</em></span></a><a name="d0e111489"></a> task inside a well / point loop. During the first loop you can use the question buttons to manually decide which wells / points are suitable / unsuitable e.g. for a precise capture. The high magnification capture can then be made during the second loop only over wells / points specifically marked in the first loop.</p></div></td><td class="requiresTd"><div><em>Requires:</em></div><div><em>Task:</em>&nbsp;<p><a class="link" href="task.system_section.html#task.define.labels"><span class="emphasis"><em>System &gt; <img src="../res/base/jobs/label_settings.png"> Create Labels</em></span></a><a name="d0e111503"></a>, <a class="link" href="task.wellplates_section.html#task.wellsloop"><span class="emphasis"><em>Well Plates &gt; <img src="../res/base/jobs/wellplate_loop.png"> Loop over Wells</em></span></a><a name="d0e111512"></a>, <a class="link" href="task.stagexy_section.html#task.points"><span class="emphasis"><em>Stage XY Points &gt; <img src="../res/base/jobs/loop_pointset.png"> Loop over Points</em></span></a><a name="d0e111521"></a></p></div></td></tr></table><p> </p><div class="sidebar"><div class="figure"><a data-toggle="lightbox" data-gallery="default" href="../img/eng/set_label.png" title="" data-title=" "><img class="img-responsive" src="../img/eng/set_label.png" alt="../img/eng/set_label.png image"></a><p class="title"><b>Figure&nbsp;1199.&nbsp;</b></p></div></div><p>Filtering by these labels inside <a class="link" href="task.wellplates_section.html#task.wellsloop"><span class="emphasis"><em>Well Plates &gt; <img src="../res/base/jobs/wellplate_loop.png"> Loop over Wells</em></span></a><a name="d0e111536"></a> and <a class="link" href="task.stagexy_section.html#task.points"><span class="emphasis"><em>Stage XY Points &gt; <img src="../res/base/jobs/loop_pointset.png"> Loop over Points</em></span></a><a name="d0e111545"></a> is possible. Select a label from the <span class="guilabel">Set Label</span> list and assign it <span class="guilabel">to</span> a well/point loop. Check <span class="guilabel">Reset other Labels</span> if you want to clear existing labels.</p><div class="sidebar"><div class="figure"><a data-toggle="lightbox" data-gallery="default" href="../img/eng/jobs_set_label_use_case.png" title="" data-title="Label use case "><img class="img-responsive" src="../img/eng/jobs_set_label_use_case.png" alt="../img/eng/jobs_set_label_use_case.png image"></a><p class="title"><b>Figure&nbsp;1200.&nbsp;Label use case</b></p></div></div></div><div class="varlistentry"><span class="term"><a name="task.set.class"></a><a name="d0e111567"></a>System &gt; <img src="../res/base/jobs/set_class.png" height="12.5"> Set Class<button class="xmlid" data-clipboard-text="id|task.set.classx">üîó</button></span> <p></p><table class="taskTable table"><tr class="taskRow"><td><div class="inline"><p>Assigns the defined class to the selected well(s)/point(s)/slide in a loop.</p></div><div class="example inline"><p><a class="link" href="tasks.analysis.html#task.general.analysis"><span class="emphasis"><em>Analysis &gt; <img src="../res/base/plugins/analysis_GA2.png"> General Analysis</em></span></a><a name="d0e111592"></a> detects that no cells are growing in a particular well plate so it is marked with a class number and removed from the capture.</p></div></td><td class="requiresTd"><div><em>Requires:</em></div><div><em>Task:</em>&nbsp;<p><a class="link" href="task.wellplates_section.html#task.wellsloop"><span class="emphasis"><em>Well Plates &gt; <img src="../res/base/jobs/wellplate_loop.png"> Loop over Wells</em></span></a><a name="d0e111606"></a> or <a class="link" href="task.stagexy_section.html#task.points"><span class="emphasis"><em>Stage XY Points &gt; <img src="../res/base/jobs/loop_pointset.png"> Loop over Points</em></span></a><a name="d0e111615"></a> or <a class="link" href="task.sampleholder_section.html#task.slides"><span class="emphasis"><em>Sample Holder &gt; <img src="../res/base/slides.png"> Loop over Slides</em></span></a><a name="d0e111624"></a>.</p></div></td></tr></table><div class="variablelist reference"><dl><div class="varlistentry"><span class="term">Assign Class</span> <p>Number of the class which will be assigned.</p></div><div class="varlistentry"><span class="term">to</span> <p>Defines the loop to which the number will be assigned.</p></div></dl></div></div><div class="varlistentry"><span class="term"><a name="task.debug"></a><a name="d0e111644"></a>System &gt; <img src="../res/base/debug.png" height="12.5"> Debug<button class="xmlid" data-clipboard-text="id|task.debugx">üîó</button></span> <p></p><table class="taskTable table"><tr class="taskRow"><td><div class="inline"><p>Selects specific parameters and lists them inside the <span class="guilabel">Job Execution Progress</span> window. Values are displayed and the Job is paused until <span class="guibutton">Continue</span> is pushed.</p></div><div class="example inline"><p>Select parameters influencing the quality of the acquisition and check them before the job is fully executed.</p></div></td><td class="requiresTd"></td></tr></table><div class="sidebar"><div class="figure"><a data-toggle="lightbox" data-gallery="default" href="../img/eng/task_debug.png" title="" data-title=" "><img class="img-responsive" src="../img/eng/task_debug.png" alt="../img/eng/task_debug.png image"></a><p class="title"><b>Figure&nbsp;1201.&nbsp;</b></p></div></div><p> </p><div class="variablelist"><dl><div class="varlistentry reference"><span class="term"><span class="guibutton">Continue</span></span> <p>Moves to the next task in the job sequence.</p></div><div class="varlistentry"><span class="term">Automatically continue after</span> <p>If there is no user interaction during the specified time limit, the job automatically continues.</p></div></dl></div></div><div class="varlistentry"><span class="term"><a name="task.phase"></a><a name="d0e111696"></a>System &gt; <img src="../res/base/jobs/phase.png" height="12.5"> Phase<button class="xmlid" data-clipboard-text="id|task.phasex">üîó</button></span> <p></p><table class="taskTable table"><tr class="taskRow"><td><div class="inline"><p>Some use cases can be logically separated into Phases (preparation, verification, acquisition).</p></div><div class="example inline"><p>This task can be used for holding parts of the job, creating conditions between these parts and running these parts in a custom order.</p></div></td><td class="requiresTd"></td></tr></table><div class="example"><a name="d0e111718"></a><p class="title"><b>Example&nbsp;14.&nbsp;Example of a well plate acquisition job separated into 4 phases:</b></p><div class="example-contents"><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Find interesting locations within wells</p></li><li class="listitem"><p>Run Autofocus at each location</p></li><li class="listitem"><p>Verify locations and proper Focus</p></li><li class="listitem"><p>Run Acquisition</p></li></ol></div></div></div><br class="example-break"><div class="sidebar"><div class="figure"><a data-toggle="lightbox" data-gallery="default" href="../img/eng/task_phase.png" title="" data-title="Phase task "><img class="img-responsive" src="../img/eng/task_phase.png" alt="../img/eng/task_phase.png image"></a><p class="title"><b>Figure&nbsp;1202.&nbsp;Phase task</b></p></div></div><p>All task contained in the dashed area at the bottom of the task can be executed <span class="guilabel">Anytime</span> or <span class="guilabel">Only after other Phases</span>. Such condition can be created in the <span class="guilabel">Expression</span> area using basic <span class="guilabel">Operators</span> and <span class="guibutton">Insert</span> for inserting the selected phase. After defining phases and clicking <span class="guibutton"> <img src="../res/base/play.png" height="12.5"> Run Job</span>, options for their direct execution or execution of the whole job are shown below.</p><div class="sidebar"><div class="figure"><a data-toggle="lightbox" data-gallery="default" href="../img/eng/task_phase_subrun.png" title="" data-title="Job Execution sub-menu "><img class="img-responsive" src="../img/eng/task_phase_subrun.png" alt="../img/eng/task_phase_subrun.png image"></a><p class="title"><b>Figure&nbsp;1203.&nbsp;Job Execution sub-menu</b></p></div></div><p>Phases can also be launched in the <a class="xref" href="jobs.overview.html#jobs.explorer">Introduction to Jobs Explorer</a> from the context menu over a job definition containing phases.</p><div class="sidebar"><div class="figure"><a data-toggle="lightbox" data-gallery="default" href="../img/eng/task_phase_submenu.png" title="" data-title="Context menu in the JOBs Explorer "><img class="img-responsive" src="../img/eng/task_phase_submenu.png" alt="../img/eng/task_phase_submenu.png image"></a><p class="title"><b>Figure&nbsp;1204.&nbsp;Context menu in the JOBs Explorer</b></p></div></div><p>After a phase is executed, this information is stored so that the job can later be executed from the following phase. Each phase can be executed multiple times and the job can still be executed whole at once.</p></div><div class="varlistentry"><span class="term"><a name="task.finish"></a><a name="d0e111785"></a>System &gt; <img src="../res/base/jobs/job_finish.png" height="12.5"> Finish<button class="xmlid" data-clipboard-text="id|task.finishx">üîó</button></span> <p></p><table class="taskTable table"><tr class="taskRow"><td><div class="inline"><p>This task finishes the current job run.</p></div><div class="example inline"><p>When a <a class="link" href="task.conditions_section.html#task.condition.if"><span class="emphasis"><em>Conditions &gt; <img src="../res/base/jobs/condition_if.png"> Condition (If)</em></span></a><a name="d0e111812"></a> evaluates the job as done, this task finishes the job and only images captured so far will be saved.</p></div></td><td class="requiresTd"></td></tr></table></div><div class="varlistentry"><span class="term"><a name="task.abort"></a><a name="d0e111819"></a>System &gt; <img src="../res/base/jobs/job_cancel.png" height="12.5"> Abort<button class="xmlid" data-clipboard-text="id|task.abortx">üîó</button></span> <p></p><table class="taskTable table"><tr class="taskRow"><td><div class="inline"><p>This task cancels the current job run.</p></div><div class="example inline"><p>Place this task in the <span class="guilabel">Else</span> section of <a class="link" href="task.conditions_section.html#task.condition.ifelse"><span class="emphasis"><em>Conditions &gt; <img src="../res/base/jobs/condition_ifelse.png"> Condition (If-Else)</em></span></a><a name="d0e111848"></a>. If a condition is not met, the job is terminated without saving any data acquired so far.</p></div></td><td class="requiresTd"></td></tr></table></div><div class="varlistentry"><span class="term"><a name="task.executemacroafterrun"></a><a name="d0e111855"></a>System &gt; <img src="../res/base/jobs/macro_after_run.png" height="12.5"> Execute Macro After Run<button class="xmlid" data-clipboard-text="id|task.executemacroafterrunx">üîó</button></span> <p></p><table class="taskTable table"><tr class="taskRow"><td><div class="inline"><p>Enters a macro command which can be performed on <span class="guilabel">Finish</span> and/or on <span class="guilabel">Abort</span> of the job.</p></div><div class="example inline"><p>This task is used when a macro command is required to be run after the job is finished or aborted.</p></div></td><td class="requiresTd"></td></tr></table><p>Please see <a class="xref" href="GS_Macros.html"><i>Macros</i></a> in the electronic help for more information.</p><div class="sidebar"><div class="figure"><a data-toggle="lightbox" data-gallery="default" href="../img/eng/task_execute_macro_after_run.png" title="" data-title=" "><img class="img-responsive" src="../img/eng/task_execute_macro_after_run.png" alt="../img/eng/task_execute_macro_after_run.png image"></a><p class="title"><b>Figure&nbsp;1205.&nbsp;</b></p></div></div><div class="variablelist reference"><dl><div class="varlistentry"><span class="term">Macro on Finish</span> <p>Executes the specified macro on job <span class="guilabel">Finish</span>.</p></div><div class="varlistentry"><span class="term">Macro on Abort</span> <p>Executes the specified macro on job <span class="guilabel">Abort</span>.</p></div><div class="varlistentry"><span class="term"><img src="../res/coregui/arrows/arrow_down.png" height="12.5"></span> <p>Click the arrow button to reveal a menu which can be used to <span class="guilabel">Insert Content of Macro...</span> from a <code class="filename">.mac</code> file, <span class="guilabel">Execute Macro...</span> from a <code class="filename">.mac</code> file or to <span class="guilabel">Append Command...</span> from the Command list.</p></div></dl></div></div><div class="varlistentry"><span class="term"><a name="task.executepythonafterrun"></a><a name="d0e111935"></a>System &gt; <img src="../res/base/jobs/python_after_run.png" height="12.5"> Execute Python After Run<button class="xmlid" data-clipboard-text="id|task.executepythonafterrunx">üîó</button></span> <p></p><table class="taskTable table"><tr class="taskRow"><td><div class="inline"><p>Executes the python function <span class="quote">‚Äú<span class="quote">run</span>‚Äù</span> defined in the python script after the job run ended.</p></div><div class="example inline"><p>Use it to open the current job folder in the MS Windows explorer.</p></div></td><td class="requiresTd"></td></tr></table><div class="variablelist"><p class="title"><b>Inputs</b></p><dl><div class="varlistentry"><span class="term">is_aborted: bool</span> <p>False on finished job and True on aborted job.</p></div><div class="varlistentry"><span class="term">Job_run_key: int</span> <p>Current job key number.</p></div></dl></div><p>To call macro use nis.mac.MacroFunctionName(macro_inputs...).</p><pre class="synopsis">nis.mac.OpenLogFile()</pre><p>When input is a value, you can use basic python types - int, floats or string.</p><p>If input is a pointer you have to construct and pass objects of nis.ptr types.</p><p>Numeric types are nis.ptr.char8, nis.ptr.byte, nis.ptr.int, nis.ptr.int64, nis.ptr.word, nis.ptr.long, nis.ptr.dword, nis.ptr.double.</p><p>Text types are nis.ptr.char.</p><p>Number or number array is created as</p><pre class="synopsis">nis.ptr.int()                      nis.ptr.int() -&gt; 0, nis.ptr.double() -&gt; 0.0
nis.ptr.int(count)                 nis.ptr.int(1) -&gt; 0, nis.ptr.double(2) -&gt; [0.0, 0.0]
nis.ptr.int(count, value)          nis.ptr.int(1, 1) -&gt; 1, nis.ptr.double(2, 1) -&gt; [1.0, 1.0]
nis.ptr.int(sequence)              nis.ptr.int([5]) -&gt; 5, nis.ptr.double([3, 4]) -&gt; [3.0, 4.0]</pre><p>Text is created as</p><pre class="synopsis">nis.ptr.char()                     nis.ptr.char() -&gt; ""
nis.ptr.char("text")               nis.ptr.char("text") - &gt; "text"</pre><p>Value inside nis.ptr objects is changed via macro functions and could be retrieved via method get().</p><pre class="synopsis">x = nis.ptr.double()
y = nis.ptr.double()
nis.mac.PiezoXYGetPosition(x, y)
print(x.get(), y.get())</pre><p>Example:</p><pre class="synopsis">import nis
import subprocess

def run(is_aborted: bool, job_run_key: int):
    if is_aborted:
        return
    path = nis.ptr.char()
    ret = nis.mac.Jobs_GetJobrunFolder(job_run_key, path)
    subprocess.Popen(fr'explorer "{path.get()}"')</pre></div><div class="varlistentry"><span class="term"><a name="task.backupafterrun"></a><a name="d0e112006"></a>System &gt; <img src="../res/base/jobs/db_backup_after_run.png" height="12.5"> Backup After Run<button class="xmlid" data-clipboard-text="id|task.backupafterrunx">üîó</button></span> <p></p><table class="taskTable table"><tr class="taskRow"><td><div class="inline"><p>Backs up the current Jobs database after the job run is finished.</p></div><div class="example inline"><p>Automatically backup the database after each job run.</p></div></td><td class="requiresTd"></td></tr></table><p> </p><div class="variablelist reference"><dl><div class="varlistentry"><span class="term">Backup database filename</span> <p>Path to the file to which the database will be saved.</p></div><div class="varlistentry"><span class="term">Image files operation</span> <p>Determines what happens to all ND2 images linked to the current database.</p></div></dl></div></div><div class="varlistentry"><span class="term"><a name="task.bypassdatabase"></a><a name="d0e112045"></a>System &gt; <img src="../res/base/save_as.png" height="12.5"> Alternative Storage Location<button class="xmlid" data-clipboard-text="id|task.bypassdatabasex">üîó</button></span> <p></p><table class="taskTable table"><tr class="taskRow"><td><div class="inline"><p>Changes the storage location. <span class="productname">NIS-Elements</span> database is ignored and all acquired files are saved into the specified folder.</p></div><div class="example inline"><p>Use this task to save files from each job run into their own separate folder.</p></div></td><td class="requiresTd"></td></tr></table><div class="sidebar"><div class="figure"><a data-toggle="lightbox" data-gallery="default" href="../img/eng/task_bypass_database.png" title="" data-title=" "><img class="img-responsive" src="../img/eng/task_bypass_database.png" alt="../img/eng/task_bypass_database.png image"></a><p class="title"><b>Figure&nbsp;1206.&nbsp;</b></p></div></div><div class="variablelist reference"><dl><div class="varlistentry"><span class="term">Store Files to</span> <p>Defines where the acquired files will be saved.</p></div><div class="varlistentry"><span class="term">Put files from all runs into specified folder (add a distinguishing unique prefix)</span> <p>All runs are placed into a single folder. Unique prefix is added.</p></div><div class="varlistentry"><span class="term">Put files of each run into separate unique subfolder</span> <p>Files from each job run are placed into a separate folder.</p></div><div class="varlistentry"><span class="term">Open First Acquired File After Run</span> <p>First file acquired in the particular job is opened in <span class="productname">NIS-Elements</span> after the job run.</p></div></dl></div></div><div class="varlistentry"><span class="term"><a name="task.storage"></a><a name="d0e112105"></a>System &gt; <img src="../res/base/jobs/alternative_store.png" height="12.5"> Storage<button class="xmlid" data-clipboard-text="id|task.storagex">üîó</button></span> <p></p><table class="taskTable table"><tr class="taskRow"><td><div class="inline"><p>This task enables the user to decide whether all acquired files are saved into a folder or thrown away.</p></div><div class="example inline"><p>Use this task in a part of the job where it is useful not to save the big generated files.</p></div></td><td class="requiresTd"></td></tr></table><div class="sidebar"><div class="figure"><a data-toggle="lightbox" data-gallery="default" href="../img/eng/task_storage_basic.png" title="" data-title=" "><img class="img-responsive" src="../img/eng/task_storage_basic.png" alt="../img/eng/task_storage_basic.png image"></a><p class="title"><b>Figure&nbsp;1207.&nbsp;</b></p></div></div><div class="variablelist reference"><dl><div class="varlistentry"><span class="term">Name</span> <p>Name of your task.</p></div><div class="varlistentry"><span class="term">Filename</span> <p>Name of the file to be created.</p></div><div class="varlistentry"><span class="term">Do not save file(s)</span> <p>Acquired files are not saved if this option is checked.</p></div><div class="varlistentry"><span class="term">Save file(s) into folder</span> <p>Files are saved into the specified folder if this option is checked.</p></div></dl></div></div><div class="varlistentry"><span class="term"><a name="task.block"></a><a name="d0e112159"></a>System &gt; <img src="../res/base/jobs/block.png" height="12.5"> Block<button class="xmlid" data-clipboard-text="id|task.blockx">üîó</button></span> <p></p><table class="taskTable table"><tr class="taskRow"><td><div class="inline"><p>A general task for wrapping blocks of other tasks.</p></div><div class="example inline"><p>Wrapped tasks can be easily collapsed and expanded or disabled.</p></div></td><td class="requiresTd"></td></tr></table></div><div class="varlistentry"><span class="term"><a name="task.exitwitherror"></a><a name="d0e112184"></a>System &gt; <img src="../res/base/device/stop.png" height="12.5"> Exit with Error<button class="xmlid" data-clipboard-text="id|task.exitwitherrorx">üîó</button></span> <p></p><table class="taskTable table"><tr class="taskRow"><td><div class="inline"><p>Upon execution, this task will terminate the currently running job and display the designated error message.</p></div><div class="example inline"><p>Use this task in a job sequence to terminate the job when the defined experiment does not follow the protocol.</p></div></td><td class="requiresTd"></td></tr></table></div><div class="varlistentry"><span class="term"><a name="task.alternatefilename"></a><a name="d0e112209"></a>System &gt; <img src="../res/base/jobs/storage.png" height="12.5"> Alternate_FileName<button class="xmlid" data-clipboard-text="id|task.alternatefilenamex">üîó</button></span> <p></p><table class="taskTable table"><tr class="taskRow"><td><div class="inline"><p>Changes the output image file naming for a job loop.</p></div><div class="example inline"><p>Insert the Z-position information to each image file name of the captured Z-Stack.</p></div></td><td class="requiresTd"><div><em>Requires:</em></div><div><em>Task:</em>&nbsp;<p>Any loop task.</p></div></td></tr></table><p> </p><div class="variablelist reference"><dl><div class="varlistentry"><span class="term">Name</span> <p>Name of your <a class="link" href="task.system_section.html#task.alternatefilename"><span class="emphasis"><em>System &gt; <img src="../res/base/jobs/storage.png"> Alternate_FileName</em></span></a><a name="d0e112250"></a> task.</p></div><div class="varlistentry"><span class="term">Prefix</span> <p>New filename prefix.</p></div><div class="varlistentry"><span class="term"><img src="../res/base/plus.png" height="12.5"></span> <p>Adds a new alternate filename definition.</p></div><div class="varlistentry"><span class="term"><img src="../res/base/arr/item_up.png" height="12.5"></span> <p>Moves the selected alternate filename definition one step up.</p></div><div class="varlistentry"><span class="term"><img src="../res/base/arr/item_down.png" height="12.5"></span> <p>Moves the selected alternate filename definition one step down.</p></div><div class="varlistentry"><span class="term"><img src="../res/base/trash.png" height="12.5"></span> <p>Deletes the selected alternate filename definition.</p></div><div class="varlistentry"><span class="term"><img src="../res/base/trash_all.png" height="12.5"></span> <p>Deletes all alternate filename definitions.</p></div><div class="varlistentry"><span class="term">Name</span> <p>Name after the <span class="quote">‚Äú<span class="quote">Prefix</span>‚Äù</span>.</p></div><div class="varlistentry"><span class="term">Loop</span> <p>Selects the loop on which the filename changes will be set.</p></div><div class="varlistentry"><span class="term">Properties</span> <p>Sets other properties added to the filename right after <span class="quote">‚Äú<span class="quote">Name</span>‚Äù</span>. This menu changes with the selected <span class="guilabel">Loop</span>.</p></div><div class="varlistentry"><span class="term">Format</span> <p>Sets the format for the consecutive images - number of digits (<span class="guilabel">Fixed</span> number or <span class="guilabel">Variable</span> numbers) and a starting number (<span class="guilabel">Start Index at</span> ). This menu changes with the selected <span class="guilabel">Properties</span>.</p></div><div class="varlistentry"><span class="term">Filename Sample</span> <p>Displays a sample filename based on the settings applied above.</p></div></dl></div></div></dl></div></div><div class="footer"><a href="http://www.laboratory-imaging.com" class="footer" target="_blank">Copyright 1991-2025 Laboratory Imaging s.r.o.</a></div><div style="height:30%;width:100%;"></div> </div> <!-- /#main --> </div> </div> </body> </html>
