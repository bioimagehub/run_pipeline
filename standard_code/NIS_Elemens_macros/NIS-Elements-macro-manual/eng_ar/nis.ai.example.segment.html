<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <meta name="description" content=""> <meta name="keywords" content=" "> <title>Segment.ai Example | NIS-Elements</title> <link rel="stylesheet" type="text/css" href="../css/syntax.css"> <link rel="stylesheet" type="text/css" href="../css/font-awesome.min.css"> <link rel="stylesheet" type="text/css" href="../css/bootstrap.min.css"> <link rel="stylesheet" type="text/css" href="../css/modern-business.css"> <link rel="stylesheet" type="text/css" href="../css/customstyles.css"> <link rel="stylesheet" type="text/css" href="../css/boxshadowproperties.css"> <link rel="stylesheet" type="text/css" href="../css/ekko-lightbox.min.css"> <link rel="stylesheet" type="text/css" href="../css/ne.css"> <script src="../js/jquery.min.js"></script> <script src="../js/jquery.cookie.min.js"></script> <script src="../js/jquery.navgoco.min.js"></script> <script src="../js/bootstrap.min.js"></script> <script src="../js/ekko-lightbox.min.js"></script> <script src="../js/lightbox.js"></script> <script src="../js/lim_help.js"></script> <script src="../js/jscopy.js"></script> <link rel="shortcut icon" href="../images/favicon_ne.ico""> <link rel="alternate" type="application/rss+xml" title="" href="/feed.xml"> </head> <body> <!-- find project homepage --> <!-- Navigation --> <nav class="navbar navbar-inverse navbar-static-top"> <div class="container-fluid topnavlinks"> <ul class="nav navbar-nav navbar-left"> <!-- separate search window: --> <!--<li><a onclick='window.open("SearchWindow.html","Search","toolbar=0,location=0,directories=0,status=0,menubar=0,top=100,left=100,height=800,width=600");'><img src="images/zoomimage.svg" class="icon"/></a></li>--> <!-- embedded iframe search window: --> <li class="pull-right"> <a href="search.html?frompage=nis.ai.example.segment.html" id="searchButton" class="searchButton btn btn-primary" title="Search"> <img src="../images/zoomimage.svg" class="icon"/> </a> <div class="searchButtonWrapper"> </div> </li> <li> <a class="fa fa-lg navbar-brand" href="man.html" alt="NIS-Elements"> <img src="../images/logo_ne.svg"/> </a> </li> <!-- entries without drop-downs appear here --> <li><a href="man.html">User Manual</a></li> <li><a href="cr.html">Menu Commands</a></li> <li class="dropdown active"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">Applications<b class="caret"></b></a> <ul class="dropdown-menu"> <li><a href="gpa.html">GPA</a></li> <li><a href="nis.ai.html">NIS.ai</a></li> <li><a href="measurement.3d.html">3D Measurement</a></li> <li><a href="analysis.modules.html">Bio Analysis Modules</a></li> <li><a href="app.concrete.html">Concrete</a></li> <li><a href="database.html">Database</a></li> <li><a href="app.deconvolution.html">Deconvolution</a></li> <li><a href="app.edf.html">Extended Depth of Focus</a></li> <li><a href="app.filters.html">Filter Particle Analysis</a></li> <li><a href="app.fret.html">FRET</a></li> <li><a href="app.ga3.html">General Analysis 3 </a></li> <li><a href="ug.hcajobs.html">HCA</a></li> <li><a href="app.hdr.html">HDR</a></li> <li><a href="GS_HowTo.IlluminationSequence.html">Illumination Sequence</a></li> <li><a href="ug.jobs.html">JOBS and HCA</a></li> <li><a href="app.layers.html">Layer Thickness Measurement</a></li> <li><a href="app.sequencer.html">Measurement Sequencer</a></li> <li><a href="app.metalo.castiron.html">Metalo - Cast Iron Analysis</a></li> <li><a href="app.metalo.grainsize.html">Metalo - Grain Size Analysis</a></li> <li><a href="app.nstorm.html">N-STORM</a></li> <li><a href="howto.triggeredacquisition.html">Triggered Acquisition</a></li> <li><a href="app.objectclassifier.html">Object Classifier</a></li> <li><a href="app.se.html">Smart Experiment</a></li> <li><a href="howto.tracking.html">Tracking</a></li> <li><a href="app.welds.html">Weld Measurement</a></li> </ul> </li> <li><a href="fr.html">Macro Functions</a></li> <!-- toggle sidebar button --> <!-- <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Nav</a></li> --> </ul> </div> <!-- /.container --> </nav> <!-- Page Content --> <div class=""> <div id="main" class="fixedPage"> <!-- Sidebar Column --> <div class="fixedSidebar" id="tg-sb-sidebar"> <!--<p>--> <ul id="mysidebar" class="nav"> <li class="sidebarTitle">NIS-Elements AR </li> <li class="sidebarSub "> <a title="NIS.ai" href="nis.ai.html">NIS.ai</a> </li> <li class=" "><a title="Functions" href="nis.ai.modalities.html">Functions</a> <ul> <li><a title="Segment.ai" href="nis.ai.modalities.segment.html">Segment.ai</a></li> <li><a title="Segment Objects.ai" href="nis.ai.modalities.segment.objects.html">Segment Objects.ai</a></li> <li><a title="Convert.ai" href="nis.ai.modalities.modality.transfer.html">Convert.ai</a></li> <li><a title="Enhance.ai" href="nis.ai.modalities.signal.enhancement.html">Enhance.ai</a></li> </ul> </li> <li class=" hidearrow"><a title="Continue Training" href="ai.continue.training.html">Continue Training</a> <ul> </ul> </li> <li class=" hidearrow"><a title="NIS.ai Explorer" href="nis.ai.catalogue.html">NIS.ai Explorer</a> <ul> </ul> </li> <li class=" hidearrow"><a title="Integration in General Analysis 3 (GA3)" href="p2c2s4.html">Integration in General Analysis 3 (GA3)</a> <ul> </ul> </li> <li class=" "><a title="Examples (version 5.42)" href="p2c2s5.html">Examples (version 5.42)</a> <ul> <li class="active"><a title="Segment.ai Example" href="nis.ai.example.segment.html">Segment.ai Example</a></li> </ul> </li> <!--if you aren't using the accordion, uncomment this block:--> <!--<p class="external"> <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a> </p>--> </ul> <!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.--> <script>$("li.active").parents('li').toggleClass("active");</script> </div> <!-- Content Column --> <div class="fixedContent" id="tg-sb-content"> <div id="invalidHash"></div> <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="nis.ai.example.segment"></a>Segment.ai Example<button class="xmlid" data-clipboard-text="id|nis.ai.example.segmentx">üîó</button></h3></div></div></div><p>The following example shows how to segment four types of cells using the <span class="guilabel">Segment.ai</span> function.</p><p>We start by creating a multi-point image from a sequence of single TIF images using the <a class="link" href="file.menu.html#menu.file.importexport.createndfilefromfilesequence"><span class="emphasis"><em><img src="../assets/main_menu.png"> File &gt; Import/Export &gt; Create ND File from File Sequence</em></span></a><a name="d0e54628"></a> dialog window.</p><div class="sidebar"><div class="figure"><a data-toggle="lightbox" data-gallery="default" href="../img/eng/nis_ai_segment_example_cells_01.png" title="" data-title="Converting singe TIFF files to one multi-point ND2 image. "><img class="img-responsive" src="../img/eng/nis_ai_segment_example_cells_01.png" alt="../img/eng/nis_ai_segment_example_cells_01.png image"></a><p class="title"><b>Figure&nbsp;537.&nbsp;Converting singe TIFF files to one multi-point ND2 image.</b></p></div></div><p>Once we <span class="guilabel">Convert</span> the images, a multi-point ND2 file is opened.</p><div class="sidebar"><div class="figure"><a data-toggle="lightbox" data-gallery="default" href="../img/eng/nis_ai_segment_example_cells_02.png" title="" data-title="Training multi-point image sample. "><img class="img-responsive" src="../img/eng/nis_ai_segment_example_cells_02.png" alt="../img/eng/nis_ai_segment_example_cells_02.png image"></a><p class="title"><b>Figure&nbsp;538.&nbsp;Training multi-point image sample.</b></p></div></div><p>Then we open the <a class="link" href="binary.menu.html#menu.binary.binaryeditor"><span class="emphasis"><em><img src="../assets/main_menu.png"> Binary &gt; Binary Editor</em></span></a><a name="d0e54655"></a> for cells segmenting. Four binary groups for four types of cells are created:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>live cells - dark color</p></li><li class="listitem"><p>dead cells - gray, transparent look</p></li><li class="listitem"><p>bulged cells - having one blunt end</p></li><li class="listitem"><p>fractured cells - broken into pieces</p></li></ul></div><p>We use the available drawing tools<span> (<a class="xref" href="binary.layers.html#bin.drawingtools">Drawing tools</a>)</span> to select single cell types and create four different binary categories. Make sure to follow the rules for binary preparation (<a class="xref" href="nis.ai.modalities.segment.html#nis.ai.modalities.segment.prepare">Preparing the training binary image</a>).</p><p>To add a new cell type (binary layer), we click on <span class="guilabel"> <img src="../res/base/blc_newb.png" height="12.5">Create New Binary Layer</span> and select it from the drop-down menu next to this button. Each cell type will have a different color. Transparency of the color can be adjusted by a keyboard shortcut <span class="keycap"><strong>Ctrl</strong></span> + <span class="keycap"><strong>Up/Down</strong></span>. After drawing at least one cell of each type we can switch to the <a class="link" href="view.menu.html#menu.view.analysiscontrols.binarylayers"><span class="emphasis"><em><img src="../assets/main_menu.png"> View &gt; Analysis Controls &gt; Binary Layers <img src="../res/base/binary.png"></em></span></a><a name="d0e54700"></a> panel and rename layers in the <span class="guilabel">Working Layers</span> section to <span class="quote">‚Äú<span class="quote">live</span>‚Äù</span>, <span class="quote">‚Äú<span class="quote">dead</span>‚Äù</span>, <span class="quote">‚Äú<span class="quote">bulged</span>‚Äù</span>, and <span class="quote">‚Äú<span class="quote">fractured</span>‚Äù</span>.</p><div class="sidebar"><div class="figure"><a data-toggle="lightbox" data-gallery="default" href="../img/eng/nis_ai_segment_example_cells_03.png" title="" data-title="Binary Layers panel. "><img class="img-responsive" src="../img/eng/nis_ai_segment_example_cells_03.png" alt="../img/eng/nis_ai_segment_example_cells_03.png image"></a><p class="title"><b>Figure&nbsp;539.&nbsp;Binary Layers panel.</b></p></div></div><p>Once we select and categorize all cells in the multi-point, we can start the training.</p><div class="sidebar"><div class="figure"><a data-toggle="lightbox" data-gallery="default" href="../img/eng/nis_ai_segment_example_cells_04.png" title="" data-title="Categorized binaries. "><img class="img-responsive" src="../img/eng/nis_ai_segment_example_cells_04.png" alt="../img/eng/nis_ai_segment_example_cells_04.png image"></a><p class="title"><b>Figure&nbsp;540.&nbsp;Categorized binaries.</b></p></div></div><p>We run <a class="link" href="nis.ai.menu.html#menu.nis.ai.trainsegment.ai"><span class="emphasis"><em><img src="../assets/main_menu.png"> NIS.ai &gt; Train Segment.ai</em></span></a><a name="d0e54740"></a>, select the source channel (Mono in our case), select which cells will be used as <span class="guilabel">Ground truth binaries</span> , leave the default number of <span class="guilabel">Iterations</span>, specify the output as shown in the figure below and click <span class="guibutton">Train</span>.</p><div class="sidebar"><div class="figure"><a data-toggle="lightbox" data-gallery="default" href="../img/eng/nis_ai_segment_example_cells_05.png" title="" data-title="Train Segment.ai dialog window. "><img class="img-responsive" src="../img/eng/nis_ai_segment_example_cells_05.png" alt="../img/eng/nis_ai_segment_example_cells_05.png image"></a><p class="title"><b>Figure&nbsp;541.&nbsp;Train Segment.ai dialog window.</b></p></div></div><p>Sample training begins. The Loss curve (red) should be decreasing over time, faster in the beginning, slower in the end as it approaches zero. There may be a few bumps along the way which is correct. Training time depends on the difficulty of the sample and the use case.</p><div class="sidebar"><div class="titlepage"></div><div class="figure sidebarchild"><a data-toggle="lightbox" data-gallery="default" href="../img/eng/nis_ai_segment_example_cells_06.png" title="" data-title="Training progress showing the loss curve. "><img class="img-responsive" src="../img/eng/nis_ai_segment_example_cells_06.png" alt="../img/eng/nis_ai_segment_example_cells_06.png image"></a><p class="title"><b>Figure&nbsp;542.&nbsp;Training progress showing the loss curve.</b></p></div><div class="figure sidebarchild"><a data-toggle="lightbox" data-gallery="default" href="../img/eng/nis_ai_segment_example_cells_08.png" title="" data-title="Loss curve after the training was completed. "><img class="img-responsive" src="../img/eng/nis_ai_segment_example_cells_08.png" alt="../img/eng/nis_ai_segment_example_cells_08.png image"></a><p class="title"><b>Figure&nbsp;543.&nbsp;Loss curve after the training was completed.</b></p></div></div><p>Once the dataset is trained, we can run the segmentation on a new dataset never used for training. Same as before the training, we convert the single TIF files into a single multi-point image. With the image open we run <a class="link" href="nis.ai.menu.html#menu.nis.ai.segment.ai"><span class="emphasis"><em><img src="../assets/main_menu.png"> NIS.ai &gt; Segment.ai</em></span></a><a name="d0e54780"></a>, browse to the trained network, check <span class="guilabel">Preview</span> and adjust the <span class="guilabel">Multi-Smooth</span> value while watching the preview image until the result is satisfactory. Then we click <span class="guibutton">OK</span> to run the segmentation.</p><div class="sidebar"><div class="figure"><a data-toggle="lightbox" data-gallery="default" href="../img/eng/nis_ai_segment_example_cells_07.png" title="" data-title="Segment.ai dialog window. "><img class="img-responsive" src="../img/eng/nis_ai_segment_example_cells_07.png" alt="../img/eng/nis_ai_segment_example_cells_07.png image"></a><p class="title"><b>Figure&nbsp;544.&nbsp;Segment.ai dialog window.</b></p></div></div><p>The dataset is now segmented and four new binary layers are created.</p><div class="sidebar"><div class="figure"><a data-toggle="lightbox" data-gallery="default" href="../img/eng/nis_ai_segment_example_cells_09.png" title="" data-title="Segmenting result. "><img class="img-responsive" src="../img/eng/nis_ai_segment_example_cells_09.png" alt="../img/eng/nis_ai_segment_example_cells_09.png image"></a><p class="title"><b>Figure&nbsp;545.&nbsp;Segmenting result.</b></p></div></div><p>You can further use the benefit of the <a class="link" href="node.nis.ai_section.html#node.nis.ai.segmentation.segment.ai"><span class="emphasis"><em>NIS.ai &gt; Segmentation &gt; Segment.ai</em></span></a><a name="d0e54812"></a> node in <span class="guilabel">General Analysis 3</span> to analyze your segmented dataset, e.g. to count the number of cells of each type.</p></div><div class="footer"><a href="http://www.laboratory-imaging.com" class="footer" target="_blank">Copyright 1991-2025 Laboratory Imaging s.r.o.</a></div><div style="height:30%;width:100%;"></div> </div> <!-- /#main --> </div> </div> </body> </html>
