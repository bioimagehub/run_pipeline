<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <meta name="description" content=""> <meta name="keywords" content=" "> <title>ND Processing &amp; Conversions | NIS-Elements</title> <link rel="stylesheet" type="text/css" href="../css/syntax.css"> <link rel="stylesheet" type="text/css" href="../css/font-awesome.min.css"> <link rel="stylesheet" type="text/css" href="../css/bootstrap.min.css"> <link rel="stylesheet" type="text/css" href="../css/modern-business.css"> <link rel="stylesheet" type="text/css" href="../css/customstyles.css"> <link rel="stylesheet" type="text/css" href="../css/boxshadowproperties.css"> <link rel="stylesheet" type="text/css" href="../css/ekko-lightbox.min.css"> <link rel="stylesheet" type="text/css" href="../css/ne.css"> <script src="../js/jquery.min.js"></script> <script src="../js/jquery.cookie.min.js"></script> <script src="../js/jquery.navgoco.min.js"></script> <script src="../js/bootstrap.min.js"></script> <script src="../js/ekko-lightbox.min.js"></script> <script src="../js/lightbox.js"></script> <script src="../js/lim_help.js"></script> <script src="../js/jscopy.js"></script> <link rel="shortcut icon" href="../images/favicon_ne.ico""> <link rel="alternate" type="application/rss+xml" title="" href="/feed.xml"> </head> <body> <!-- find project homepage --> <!-- Navigation --> <nav class="navbar navbar-inverse navbar-static-top"> <div class="container-fluid topnavlinks"> <ul class="nav navbar-nav navbar-left"> <!-- separate search window: --> <!--<li><a onclick='window.open("SearchWindow.html","Search","toolbar=0,location=0,directories=0,status=0,menubar=0,top=100,left=100,height=800,width=600");'><img src="images/zoomimage.svg" class="icon"/></a></li>--> <!-- embedded iframe search window: --> <li class="pull-right"> <a href="search.html?frompage=node.ndprocessingconversions_section.html" id="searchButton" class="searchButton btn btn-primary" title="Search"> <img src="../images/zoomimage.svg" class="icon"/> </a> <div class="searchButtonWrapper"> </div> </li> <li> <a class="fa fa-lg navbar-brand" href="man.html" alt="NIS-Elements"> <img src="../images/logo_ne.svg"/> </a> </li> <!-- entries without drop-downs appear here --> <li><a href="man.html">User Manual</a></li> <li><a href="cr.html">Menu Commands</a></li> <li class="dropdown active"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">Applications<b class="caret"></b></a> <ul class="dropdown-menu"> <li><a href="gpa.html">GPA</a></li> <li><a href="nis.ai.html">NIS.ai</a></li> <li><a href="measurement.3d.html">3D Measurement</a></li> <li><a href="analysis.modules.html">Bio Analysis Modules</a></li> <li><a href="app.concrete.html">Concrete</a></li> <li><a href="database.html">Database</a></li> <li><a href="app.deconvolution.html">Deconvolution</a></li> <li><a href="app.edf.html">Extended Depth of Focus</a></li> <li><a href="app.filters.html">Filter Particle Analysis</a></li> <li><a href="app.fret.html">FRET</a></li> <li><a href="app.ga3.html">General Analysis 3 </a></li> <li><a href="ug.hcajobs.html">HCA</a></li> <li><a href="app.hdr.html">HDR</a></li> <li><a href="GS_HowTo.IlluminationSequence.html">Illumination Sequence</a></li> <li><a href="ug.jobs.html">JOBS and HCA</a></li> <li><a href="app.layers.html">Layer Thickness Measurement</a></li> <li><a href="app.sequencer.html">Measurement Sequencer</a></li> <li><a href="app.metalo.castiron.html">Metalo - Cast Iron Analysis</a></li> <li><a href="app.metalo.grainsize.html">Metalo - Grain Size Analysis</a></li> <li><a href="app.nstorm.html">N-STORM</a></li> <li><a href="howto.triggeredacquisition.html">Triggered Acquisition</a></li> <li><a href="app.objectclassifier.html">Object Classifier</a></li> <li><a href="app.se.html">Smart Experiment</a></li> <li><a href="howto.tracking.html">Tracking</a></li> <li><a href="app.welds.html">Weld Measurement</a></li> </ul> </li> <li><a href="fr.html">Macro Functions</a></li> <!-- toggle sidebar button --> <!-- <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Nav</a></li> --> </ul> </div> <!-- /.container --> </nav> <!-- Page Content --> <div class=""> <div id="main" class="fixedPage"> <!-- Sidebar Column --> <div class="fixedSidebar" id="tg-sb-sidebar"> <!--<p>--> <ul id="mysidebar" class="nav"> <li class="sidebarTitle">NIS-Elements AR </li> <li class="sidebarSub "> <a title="General Analysis 3" href="app.ga3.html">General Analysis 3</a> </li> <li class=" hidearrow"><a title="Introduction" href="ga3.introduction.html">Introduction</a> <ul> </ul> </li> <li class=" hidearrow"><a title="Changes from 5.40" href="p2c11s2.html">Changes from 5.40</a> <ul> </ul> </li> <li class=" "><a title="Basic Control" href="p2c11s3.html">Basic Control</a> <ul> <li><a title="Toolbars and Menus" href="ga3.toolbars.html">Toolbars and Menus</a></li> <li><a title="Functions, groups and sections" href="GA3_Functions.html">Functions, groups and sections</a></li> </ul> </li> <li class=" hidearrow"><a title="Examples" href="p2c11s4.html">Examples</a> <ul> </ul> </li> <li class=" "><a title="Nodes" href="action.reference.html">Nodes</a> <ul> <li><a title="Image Processing" href="node.imageprocessing_section.html">Image Processing</a></li> <li><a title="Image Operations" href="node.imageoperations_section.html">Image Operations</a></li> <li class="active"><a title="ND Processing &amp; Conversions" href="node.ndprocessingconversions_section.html">ND Processing &amp; Conversions</a></li> <li><a title="Segmentation" href="node.segmentation_section.html">Segmentation</a></li> <li><a title="Binary processing" href="node.binaryprocessing_section.html">Binary processing</a></li> <li><a title="Binary operations" href="node.binaryoperations_section.html">Binary operations</a></li> <li><a title="Measurement" href="node.measurement_section.html">Measurement</a></li> <li><a title="Data management" href="node.datamanagement_section.html">Data management</a></li> <li><a title="Results &amp; Graphs" href="node.results.graphs_section.html">Results &amp; Graphs</a></li> <li><a title="Sources &amp; Reference" href="node.sourcesreference_section.html">Sources &amp; Reference</a></li> <li><a title="NIS.ai" href="node.nis.ai_section.html">NIS.ai</a></li> <li><a title="Tracking" href="node.tracking.group_section.html">Tracking</a></li> <li><a title="Hidden Nodes (created in NIS-Elements 5.4x)" href="p2c11s5s13.html">Hidden Nodes (created in NIS-Elements 5.4x)</a></li> </ul> </li> <!--if you aren't using the accordion, uncomment this block:--> <!--<p class="external"> <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a> </p>--> </ul> <!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.--> <script>$("li.active").parents('li').toggleClass("active");</script> </div> <!-- Content Column --> <div class="fixedContent" id="tg-sb-content"> <div id="invalidHash"></div> <div class="section folder"><div class="titlepage"><div><div><h3 class="title"><a name="node.ndprocessingconversions_section"></a><a name="node.ndprocessingconversions"></a><img src="../res/express/actions/conversions.png" height="12.5"> ND Processing &amp; Conversions<button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions_sectionx">ðŸ”—</button></h3></div></div></div><div class="itemizedlist menutree"><ul class="itemizedlist menutree" type="disc"><li class="listitem"><p><span class="emphasis"><em><a name="node.ndprocessingconversions.stackreduction"></a>Stack reduction</em></span><a name="d0e67686"></a> <img src="../assets/submenu.png"></p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.stackreduction.average"> Average</a></p></li><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.stackreduction.bestfocusplane"> Best Focus Plane</a></p></li><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.stackreduction.edf"> EDF</a></p></li><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.stackreduction.integrate"> Integrate</a></p></li><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.stackreduction.maxip"> Max IP</a></p></li><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.stackreduction.maxipref"> Max IP Ref</a></p></li><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.stackreduction.median"> Median</a></p></li><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.stackreduction.quantileimage"> Quantile Image</a></p></li><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.stackreduction.minip"> Min IP</a></p></li><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.stackreduction.selectframe"> Select Frame</a></p></li><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.stackreduction.selectsingleframe"> Select Single Frame</a></p></li><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.stackreduction.selectsinglebinary"> Select Single Binary</a></p></li><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.stackreduction.shadingimage"> Shading Image</a></p></li><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.stackreduction.stitchmultipoints"> Stitch Multi Points</a></p></li></ul></div></li><li class="listitem"><p><span class="emphasis"><em><a name="node.ndprocessingconversions.stackreductionbinary"></a>Stack reduction Binary</em></span><a name="d0e67753"></a> <img src="../assets/submenu.png"></p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.stackreductionbinary.and"> And</a></p></li><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.stackreductionbinary.or"> Or</a></p></li></ul></div></li><li class="listitem"><p><span class="emphasis"><em><a name="node.ndprocessingconversions.processing"></a>Processing</em></span><a name="d0e67772"></a> <img src="../assets/submenu.png"></p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.processing.align"> Align</a></p></li><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.processing.equalizeintensity"> Equalize Intensity</a></p></li></ul></div></li><li class="listitem"><p><span class="emphasis"><em><a name="node.ndprocessingconversions.binarytocolor"></a>Binary to Color</em></span><a name="d0e67791"></a> <img src="../assets/submenu.png"></p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.binarytocolor.convert"> Convert</a></p></li><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.binarytocolor.convertusingtable"> Convert Using Table</a></p></li><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.binarytocolor.convertusingtable.3d"> Convert Using Table <img src="../img/icons/mtype_3d.png"></a></p></li></ul></div></li><li class="listitem"><p><span class="emphasis"><em><a name="node.ndprocessingconversions.bitdepth"></a>Bitdepth</em></span><a name="d0e67815"></a> <img src="../assets/submenu.png"></p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.bitdepth.changebitdepth"> Change Bit Depth</a></p></li><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.bitdepth.changebitdepth.3d"> Change Bit Depth <img src="../img/icons/mtype_3d.png"></a></p></li><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.bitdepth.converttoref"> Convert to Ref</a></p></li></ul></div></li><li class="listitem"><p><span class="emphasis"><em><a name="node.ndprocessingconversions.channels"></a>Channels</em></span><a name="d0e67839"></a> <img src="../assets/submenu.png"></p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.channels.mergechannels"> Merge Channels</a></p></li><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.channels.splitchannels"> Split Channels</a></p></li><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.channels.channeltointensity"> Channel to Intensity</a></p></li></ul></div></li><li class="listitem"><p><span class="emphasis"><em><a name="node.ndprocessingconversions.labelsclasses"></a>Labels &amp; Classes</em></span><a name="d0e67862"></a> <img src="../assets/submenu.png"></p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.labelsclasses.binariestocolor"> Binaries to Color</a></p></li><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.labelsclasses.colortobinaries"> Color to Binaries</a></p></li></ul></div></li><li class="listitem"><p><span class="emphasis"><em><a name="node.ndprocessingconversions.rendertorgb"></a>Render to RGB</em></span><a name="d0e67881"></a> <img src="../assets/submenu.png"></p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.rendertorgb.color"> Color</a></p></li><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.rendertorgb.binary"> Binary</a></p></li><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.rendertorgb.overlay"> Overlay</a></p></li><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.rendertorgb.graph"> Graph</a></p></li></ul></div></li><li class="listitem"><p><span class="emphasis"><em><a name="node.ndprocessingconversions.rendertotable"></a>Render to Table</em></span><a name="d0e67908"></a> <img src="../assets/submenu.png"></p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.rendertotable.renderframe"> Render Frame</a></p></li><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.rendertotable.renderobjects"> Render Objects</a></p></li></ul></div></li><li class="listitem"><p><span class="emphasis"><em><a name="node.ndprocessingconversions.rgb"></a>RGB</em></span><a name="d0e67927"></a> <img src="../assets/submenu.png"></p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.rgb.rgbtointensity"> RGB to Intensity</a></p></li><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.rgb.rgbtohsi"> RGB to HSI</a></p></li><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.rgb.hsitorgb"> HSI to RGB</a></p></li></ul></div></li><li class="listitem"><p><span class="emphasis"><em><a name="node.ndprocessingconversions.goldensample"></a>Golden Sample</em></span><a name="d0e67950"></a> <img src="../assets/submenu.png"></p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.goldensample.match"> Match</a></p></li><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.goldensample.draw"> Draw</a></p></li></ul></div></li><li class="listitem"><p><span class="emphasis"><em><a name="node.ndprocessingconversions.volumecontrast"></a>Volume Contrast</em></span><a name="d0e67969"></a> <img src="../assets/submenu.png"></p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.volumecontrast.volumecontrast"> Volume Contrast</a></p></li></ul></div></li><li class="listitem"><p><span class="emphasis"><em><a name="node.ndprocessingconversions.pythonscripting"></a>Python Scripting</em></span><a name="d0e67984"></a> <img src="../assets/submenu.png"></p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.pythonscripting.python"> Python</a></p></li><li class="listitem"><p><a class="link" href="node.ndprocessingconversions_section.html#node.ndprocessingconversions.pythonscripting.python.3d"> Python <img src="../img/icons/mtype_3d.png"></a></p></li></ul></div></li></ul></div><div class="variablelist commands"><dl><div class="varlistentry"><span class="term"><a name="node.ndprocessingconversions.stackreduction.average"></a>ND Processing &amp; Conversions &gt; Stack reduction &gt; Average<button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions.stackreduction.averagex">ðŸ”—</button></span> <p></p><p>Reduces N source frames into one resulting frame. Each pixel value in the resulting frame is an average of corresponding pixels in N source frames.</p><div class="variablelist"><p class="title"><b>Based on the type:</b></p><dl><div class="varlistentry"><span class="term">All Frames</span> <p>All frames in the loop are reduced into one frame (all to 1).</p></div><div class="varlistentry"><span class="term">Rolling</span> <p>For each frame in the loop reduces surrounding N frames into the current one (all to all).</p></div><div class="varlistentry"><span class="term">Piecewise</span> <p>Reduces every consecutive N frames into one frame (all to all/N).</p></div></dl></div><p> </p><div class="variablelist"><dl><div class="varlistentry"><span class="term">Loop</span> <p>Loop to be reduced.</p></div><div class="varlistentry"><span class="term">Frames</span> <p>Number of frames to reduce. Disabled for <span class="guilabel">All Frames</span>.</p></div></dl></div></div><div class="varlistentry"><span class="term"><a name="node.ndprocessingconversions.stackreduction.bestfocusplane"></a>ND Processing &amp; Conversions &gt; Stack reduction &gt; Best Focus Plane<button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions.stackreduction.bestfocusplanex">ðŸ”—</button></span> <p></p><p>Finds the best focus plane in the whole loop and effectively reduces the loop into single frame.</p><div class="variablelist"><dl><div class="varlistentry"><span class="term">Focus Criterion</span> <p>Select the method matching the acquisition modality.</p></div><div class="varlistentry"><span class="term">Loop</span> <p>Loop to be reduced.</p></div><div class="varlistentry"><span class="term">Channel</span> <p>In case there are more channels (All) select the one to use for criterion calculation.</p></div></dl></div></div><div class="varlistentry cdesc"><a name="CR_GA3_ND_EDF"></a><span class="term"><a name="node.ndprocessingconversions.stackreduction.edf"></a><a name="CR_GA3_ND_EDFX"></a>ND Processing &amp; Conversions &gt; Stack reduction &gt; EDF<button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions.stackreduction.edfx">ðŸ”—</button></span> <p></p><p><span class="requires">(requires: <a class="link" href="reference.modules.html#mod.edf">EDF Module</a>)</span></p><p>Creates an Extended Depth of Focus (EDF) image from the selected Z-Stack <span class="guilabel">Loop</span> similarly to the <a class="link" href="applications.menu.html#CR__EDF_CreateFocusedImageDef"><span class="emphasis"><em>Applications &gt; EDF &gt; Create Focused Image <img src="../res/base/edf_focused.png"></em></span></a><a name="d0e68096"></a>. For more information about EDF, please see <a class="xref" href="app.edf.html"><i>Extended Depth of Focus</i></a>.</p></div><div class="varlistentry cdesc"><a name="CR_ND_Integrate"></a><span class="term"><a name="node.ndprocessingconversions.stackreduction.integrate"></a><a name="CR_ND_IntegrateX"></a>ND Processing &amp; Conversions &gt; Stack reduction &gt; Integrate<button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions.stackreduction.integratex">ðŸ”—</button></span> <p></p><p>Integration uses multiple source frames to create one resulting image by integrating their pixel intensities. This is useful especially for low-signal (dark) scenes.</p><div class="variablelist"><dl><div class="varlistentry"><span class="term">All Frames</span> <p>All frames in the loop are reduced into one frame (all to 1).</p></div><div class="varlistentry"><span class="term">Rolling</span> <p>For each frame in the loop reduces surrounding N frames into the current one (all to all).</p></div><div class="varlistentry"><span class="term">Piecewise</span> <p>Reduces every consecutive N frames into one frame (all to all/N).</p></div><div class="varlistentry"><span class="term">Loop</span> <p>Loop to be reduced.</p></div><div class="varlistentry"><span class="term">Frames</span> <p>Number of frames to reduce. Disabled for <span class="guilabel">All Frames</span>.</p></div></dl></div></div><div class="varlistentry cdesc"><a name="CR_GA_ND_ShowMaxIntProjectionImage"></a><span class="term"><a name="node.ndprocessingconversions.stackreduction.maxip"></a><a name="CR_GA_ND_ShowMaxIntProjectionImageX"></a>ND Processing &amp; Conversions &gt; Stack reduction &gt; Max IP<button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions.stackreduction.maxipx">ðŸ”—</button></span> <p>Displays ND document in the maximum intensity projection. See <a class="xref" href="nd.dimensions.html#GS_ND2.views">ND Views</a> for more information.</p></div><div class="varlistentry cdesc"><a name="CR_GA_ND_ShowMaxIntProjectionImageRef"></a><span class="term"><a name="node.ndprocessingconversions.stackreduction.maxipref"></a><a name="CR_GA_ND_ShowMaxIntProjectionImageRefX"></a>ND Processing &amp; Conversions &gt; Stack reduction &gt; Max IP Ref<button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions.stackreduction.maxiprefx">ðŸ”—</button></span> <p></p><p>Reduces the specified loop by taking a pixel from Channel stack <span class="guilabel">A</span> from the frame where the Reference channel stack <span class="guilabel">Ref</span> has maximum intensity.</p></div><div class="varlistentry cdesc"><a name="CR_ND_Median"></a><span class="term"><a name="node.ndprocessingconversions.stackreduction.median"></a><a name="CR_ND_MedianX"></a>ND Processing &amp; Conversions &gt; Stack reduction &gt; Median<button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions.stackreduction.medianx">ðŸ”—</button></span> <p></p><p>Performs <a class="ulink" href="https://en.wikipedia.org/wiki/Median" target="_blank">median</a> on the connected result based on the specified parameters.</p><div class="variablelist"><dl><div class="varlistentry"><span class="term">All Frames</span> <p>All frames in the loop are reduced into one frame (all to 1).</p></div><div class="varlistentry"><span class="term">Rolling</span> <p>For each frame in the loop reduces surrounding N frames into the current one (all to all).</p></div><div class="varlistentry"><span class="term">Piecewise</span> <p>Reduces every consecutive N frames into one frame (all to all/N).</p></div><div class="varlistentry"><span class="term">Loop</span> <p>Loop to be reduced.</p></div><div class="varlistentry"><span class="term">Frames</span> <p>Number of frames to reduce. Disabled for <span class="guilabel">All Frames</span>.</p></div></dl></div></div><div class="varlistentry cdesc"><a name="CR_GA_ND_ShowQuantileIntProjectionImage"></a><span class="term"><a name="node.ndprocessingconversions.stackreduction.quantileimage"></a><a name="CR_GA_ND_ShowQuantileIntProjectionImageX"></a>ND Processing &amp; Conversions &gt; Stack reduction &gt; Quantile Image<button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions.stackreduction.quantileimagex">ðŸ”—</button></span> <p></p><p>Performs <a class="ulink" href="https://en.wikipedia.org/wiki/Quantile" target="_blank">quantile</a> on the connected result based on the specified parameters.</p></div><div class="varlistentry cdesc"><a name="CR_GA_ND_ShowMinIntProjectionImage"></a><span class="term"><a name="node.ndprocessingconversions.stackreduction.minip"></a><a name="CR_GA_ND_ShowMinIntProjectionImageX"></a>ND Processing &amp; Conversions &gt; Stack reduction &gt; Min IP<button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions.stackreduction.minipx">ðŸ”—</button></span> <p>Displays ND document in the minimum intensity projection. See <a class="xref" href="nd.dimensions.html#GS_ND2.views">ND Views</a> for more information.</p></div><div class="varlistentry cdesc"><a name="CR_ND_Select"></a><span class="term"><a name="node.ndprocessingconversions.stackreduction.selectframe"></a><a name="CR_ND_SelectX"></a>ND Processing &amp; Conversions &gt; Stack reduction &gt; Select Frame<button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions.stackreduction.selectframex">ðŸ”—</button></span> <p></p><p>This action is used for selecting a specific frame in the source image.</p><div class="variablelist"><dl><div class="varlistentry"><span class="term">Loop</span> <p>Loop where the frame will be selected.</p></div><div class="varlistentry"><span class="term">Select Frame</span> <p>Specifies the selection from the current loop.</p></div><div class="varlistentry"><span class="term">Start</span> <p>Starting frame.</p></div><div class="varlistentry"><span class="term">Count</span> <p>Number of frames.</p></div><div class="varlistentry"><span class="term">Step</span> <p>Step size.</p></div></dl></div></div><div class="varlistentry cdesc"><a name="CR_ND_SelectSingleFrame"></a><span class="term"><a name="node.ndprocessingconversions.stackreduction.selectsingleframe"></a><a name="CR_ND_SelectSingleFrameX"></a>ND Processing &amp; Conversions &gt; Stack reduction &gt; Select Single Frame<button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions.stackreduction.selectsingleframex">ðŸ”—</button></span> <p></p><p>Selects one frame (<span class="guilabel">Index</span>) from the specified dimension (<span class="guilabel">Loop</span>).</p></div><div class="varlistentry cdesc"><a name="CR_ND_SelectSingleBinary"></a><span class="term"><a name="node.ndprocessingconversions.stackreduction.selectsinglebinary"></a><a name="CR_ND_SelectSingleBinaryX"></a>ND Processing &amp; Conversions &gt; Stack reduction &gt; Select Single Binary<button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions.stackreduction.selectsinglebinaryx">ðŸ”—</button></span> <p></p><p>Returns binary from a selected frame (Index) chosen from the specified dimension (Loop).</p></div><div class="varlistentry cdesc"><a name="CR_ND_ShadingImage"></a><span class="term"><a name="node.ndprocessingconversions.stackreduction.shadingimage"></a><a name="CR_ND_ShadingImageX"></a>ND Processing &amp; Conversions &gt; Stack reduction &gt; Shading Image<button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions.stackreduction.shadingimagex">ðŸ”—</button></span> <p></p><p>Captures a shading image of the selected <span class="guilabel">Type</span> on the selected <span class="guilabel">Loop</span>. See also <a class="link" href="image.menu.html#CR__ShadingCorrection"><span class="emphasis"><em>Image &gt; Background &gt; Shading Correction</em></span></a><a name="d0e68321"></a>.</p></div><div class="varlistentry cdesc"><a name="CR_ND_Stitch"></a><span class="term"><a name="node.ndprocessingconversions.stackreduction.stitchmultipoints"></a><a name="CR_ND_StitchX"></a>ND Processing &amp; Conversions &gt; Stack reduction &gt; Stitch Multi Points<button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions.stackreduction.stitchmultipointsx">ðŸ”—</button></span> <p></p><p><span class="requires">(requires: <a class="link" href="reference.modules.html#mod.xy">Stage</a>)</span></p><p>Stitches frames of the connected image into a large image. Select the stitching method from the <span class="guilabel">Stitching via</span> drop-down menu (see <a class="xref" href="p1c7s6.html#stitching.methods">Methods Used for Stitching Large Images</a>). Optionally the <span class="guilabel">Precise stitching (Image Registration)</span> can be checked but be aware that it is more computationally demanding.</p><p>Optionally use the <span class="guilabel">Automatic Shading Correction</span> and choose the type which best represents your sample - Brightfield, DIC like or Fluorescence with <span class="guilabel">offset</span> enabling to heighten brightness level of the corrected image to make objects in dark areas more visible.</p></div><div class="varlistentry cdesc"><a name="CR_GA3_ND.BinaryAnd"></a><span class="term"><a name="node.ndprocessingconversions.stackreductionbinary.and"></a><a name="CR_GA3_ND.BinaryAndX"></a>ND Processing &amp; Conversions &gt; Stack reduction Binary &gt; And<button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions.stackreductionbinary.andx">ðŸ”—</button></span> <p></p><p>Reduces N source frames into one resulting frame. Each binary pixel in the resulting frame means that every frame has this binary pixel. The function behaves like Min IP but on the binary.</p><div class="variablelist"><dl><div class="varlistentry"><span class="term">All Frames</span> <p>All frames in the loop are reduced into one frame (all to 1).</p></div><div class="varlistentry"><span class="term">Rolling</span> <p>For each frame in the loop reduces surrounding N frames into the current one (all to all).</p></div><div class="varlistentry"><span class="term">Piecewise</span> <p>Reduces every consecutive N frames into one frame (all to all/N).</p></div><div class="varlistentry"><span class="term">Loop</span> <p>Loop to be reduced.</p></div><div class="varlistentry"><span class="term">Frames</span> <p>Number of frames to reduce. Feature is disabled for <span class="guilabel">All Frames</span>.</p></div></dl></div></div><div class="varlistentry cdesc"><a name="CR_GA3_ND.BinaryOr"></a><span class="term"><a name="node.ndprocessingconversions.stackreductionbinary.or"></a><a name="CR_GA3_ND.BinaryOrX"></a>ND Processing &amp; Conversions &gt; Stack reduction Binary &gt; Or<button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions.stackreductionbinary.orx">ðŸ”—</button></span> <p></p><p>Reduces N source frames into one resulting frame. Each binary pixel in the resulting frame means that at least one frame has this binary pixel. The function behaves like Min IP but on the binary.</p><div class="variablelist"><dl><div class="varlistentry"><span class="term">All Frames</span> <p>All frames in the loop are reduced into one frame (all to 1).</p></div><div class="varlistentry"><span class="term">Rolling</span> <p>For each frame in the loop reduces surrounding N frames into the current one (all to all).</p></div><div class="varlistentry"><span class="term">Piecewise</span> <p>Reduces every consecutive N frames into one frame (all to all/N).</p></div><div class="varlistentry"><span class="term">Loop</span> <p>Loop to be reduced.</p></div><div class="varlistentry"><span class="term">Frames</span> <p>Number of frames to reduce. Feature is disabled for <span class="guilabel">All Frames</span>.</p></div></dl></div></div><div class="varlistentry cdesc"><a name="CR_ND_Align"></a><span class="term"><a name="node.ndprocessingconversions.processing.align"></a><a name="CR_ND_AlignX"></a>ND Processing &amp; Conversions &gt; Processing &gt; Align<button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions.processing.alignx">ðŸ”—</button></span> <p>Moves the frames with respect to each other in order to stabilize the motion of the image.</p><div class="variablelist reference"><dl><div class="varlistentry"><span class="term">Align to</span> <p>Previous / First frame.</p></div><div class="varlistentry"><span class="term">Loop</span> <p>Loop to stabilize.</p></div><div class="varlistentry"><span class="term">Channel</span> <p>In case there are more channels (All) select the one to use for calculation.</p></div><div class="varlistentry"><span class="term">Smooth Movement Correction </span> <p></p></div><div class="varlistentry"><span class="term">Correction for Heavily Noised Images </span> <p></p></div><div class="varlistentry"><span class="term">Super Resolution Alignment </span> <p></p></div></dl></div></div><div class="varlistentry cdesc"><a name="CR_GA__EqualizeIntensityZ"></a><span class="term"><a name="node.ndprocessingconversions.processing.equalizeintensity"></a><a name="CR_GA__EqualizeIntensityZX"></a>ND Processing &amp; Conversions &gt; Processing &gt; Equalize Intensity<button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions.processing.equalizeintensityx">ðŸ”—</button></span> <p>This command enhances the dynamic range of generally any current ND2 file which contains at least Z dimension. It analyses the image, calculates values similar to auto-contrast values common for the whole time sequence and then processes all frames of the ND2 file. This method is robust to noise and preserves original trends of histogram.</p><p>You can select a method used to equalize the intensity.</p><div class="sidebar"><div class="figure"><a data-toggle="lightbox" data-gallery="default" href="../img/eng/equalizeintensityin.png" title="" data-title=" "><img class="img-responsive" src="../img/eng/equalizeintensityin.png" alt="../img/eng/equalizeintensityin.png image"></a><p class="title"><b>Figure&nbsp;721.&nbsp;</b></p></div></div><div class="variablelist reference"><dl><div class="varlistentry"><span class="term">Histogram Stretching</span> <p>Select which method is used to equalize the document. The histogram is stretched using selected methods. The shape of the histogram is preserved.</p></div><div class="varlistentry"><span class="term">Histogram Shape Transformation to the Current One</span> <p>This method transforms the shape of the histogram of the whole document according to shape of the histogram of the selected area.</p></div></dl></div><p>After you press the OK button, you will be prompted to select according to which area the image will be equalized. Draw the rectangle and confirm with a right-mouse click. The document is processed afterwards.</p></div><div class="varlistentry cdesc"><a name="CR_BinaryToColorSimple"></a><span class="term"><a name="node.ndprocessingconversions.binarytocolor.convert"></a><a name="CR_BinaryToColorSimpleX"></a>ND Processing &amp; Conversions &gt; Binary to Color &gt; Convert<button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions.binarytocolor.convertx">ðŸ”—</button></span> <p></p><p>Connected binary image is converted into a color image. Pixels of the binary objects are equal to one and background pixels become zeros.</p></div><div class="varlistentry cdesc"><a name="CR_Bin_BinaryToColor"></a><span class="term"><a name="node.ndprocessingconversions.binarytocolor.convertusingtable"></a><a name="CR_Bin_BinaryToColorX"></a>ND Processing &amp; Conversions &gt; Binary to Color &gt; Convert Using Table<button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions.binarytocolor.convertusingtablex">ðŸ”—</button></span> <p></p><p>Creates a new channel with a binary filled with the measured object feature (<span class="guilabel">Object value</span> ).</p><div class="example"><a name="d0e68535"></a><p class="title"><b>Example&nbsp;9.&nbsp;</b></p><div class="example-contents"><p>Detect objects on a channel (with threshold) and measure circularity (or any other object feature). Then use this action on the thresholded result and connect the tabular input with the circularity result. Set <span class="guilabel">Object value</span> to Circularity. Each binary object now gets a circularity value.</p></div></div><br class="example-break"><div class="sidebar"><div class="figure"><a data-toggle="lightbox" data-gallery="default" href="../img/eng/ga3_action_convert_using_table_example_1.png" title="" data-title="Convert Using Table Example "><img class="img-responsive" src="../img/eng/ga3_action_convert_using_table_example_1.png" alt="../img/eng/ga3_action_convert_using_table_example_1.png image"></a><p class="title"><b>Figure&nbsp;722.&nbsp;Convert Using Table Example</b></p></div></div><p> </p><div class="sidebar"><div class="figure"><a data-toggle="lightbox" data-gallery="default" href="../img/eng/ga3_action_convert_using_table_example_2.png" title="" data-title="Bottom right area of the image showing the binary layer with the assigned circularity value (0,16 in this example) "><img class="img-responsive" src="../img/eng/ga3_action_convert_using_table_example_2.png" alt="../img/eng/ga3_action_convert_using_table_example_2.png image"></a><p class="title"><b>Figure&nbsp;723.&nbsp;Bottom right area of the image showing the binary layer with the assigned circularity value (0,16 in this example)</b></p></div></div><div class="variablelist"><dl><div class="varlistentry"><span class="term">Background</span> <p>Value added to the background (everything except the binary).</p></div><div class="varlistentry"><span class="term">Object value</span> <p>Object feature which is written to the object linked through <span class="guilabel">Entity</span> and <span class="guilabel">ObjectId</span> .</p></div></dl></div></div><div class="varlistentry cdesc"><a name="CR_Bin_BinaryToColor3D"></a><span class="term"><a name="node.ndprocessingconversions.binarytocolor.convertusingtable.3d"></a><a name="CR_Bin_BinaryToColor3DX"></a>ND Processing &amp; Conversions &gt; Binary to Color &gt; Convert Using Table <img src="../img/icons/mtype_3d.png" height="12.5"><button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions.binarytocolor.convertusingtable.3dx">ðŸ”—</button></span> <p></p><p>Creates a new channel with a binary filled with the measured object feature (Object value).</p><div class="variablelist"><dl><div class="varlistentry"><span class="term">Background</span> <p>Value added to the background (everything except the binary).</p></div><div class="varlistentry"><span class="term">Object value</span> <p>Object feature which is written to the object linked through <span class="guilabel">Entity</span> and <span class="guilabel">Object3DId</span> .</p></div></dl></div></div><div class="varlistentry"><span class="term"><a name="node.ndprocessingconversions.bitdepth.changebitdepth"></a>ND Processing &amp; Conversions &gt; Bitdepth &gt; Change Bit Depth<button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions.bitdepth.changebitdepthx">ðŸ”—</button>, </span><span class="term"><a name="node.ndprocessingconversions.bitdepth.changebitdepth.3d"></a>ND Processing &amp; Conversions &gt; Bitdepth &gt; Change Bit Depth <img src="../img/icons/mtype_3d.png" height="12.5"></span> <p></p><p>Changes the bit-depth of the connected result.</p><div class="sidebar"><div class="figure"><a data-toggle="lightbox" data-gallery="default" href="../img/eng/changebitdepth.png" title="" data-title=" "><img class="img-responsive" src="../img/eng/changebitdepth.png" alt="../img/eng/changebitdepth.png image"></a><p class="title"><b>Figure&nbsp;724.&nbsp;</b></p></div></div><div class="variablelist"><dl><div class="varlistentry"><span class="term">Output Bit Depth</span> <p>Sets a new color depth of your image. 8-bit/16-bit integer or a floating-point. Intensity values can be rescaled.</p><p>See <a class="xref" href="image.formats.html#floating.point.images">Floating Point Images</a>.</p></div><div class="varlistentry"><span class="term">Re-scale intensity values</span> <p>If checked the pixel values are mapped to the new range. E.g. when you convert an 8bit image to 16bit and you do not rescale the values, it results in a completely black image. If the check box was selected, the 8bit 255 value would become 65535 in 16bit etc.</p></div></dl></div></div><div class="varlistentry cdesc"><a name="CR_ChangeBitDepthToRef"></a><span class="term"><a name="node.ndprocessingconversions.bitdepth.converttoref"></a><a name="CR_ChangeBitDepthToRefX"></a>ND Processing &amp; Conversions &gt; Bitdepth &gt; Convert to Ref<button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions.bitdepth.converttorefx">ðŸ”—</button></span> <p></p><p>Changes the bit-depth of the connected result to the bit-depth of the connected reference image. Intensity values can be rescaled.</p></div><div class="varlistentry cdesc"><a name="CR_MergeChannels"></a><span class="term"><a name="node.ndprocessingconversions.channels.mergechannels"></a><a name="CR_MergeChannelsX"></a>ND Processing &amp; Conversions &gt; Channels &gt; Merge Channels<button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions.channels.mergechannelsx">ðŸ”—</button></span> <p></p><p>Merges all connected results into one.</p></div><div class="varlistentry cdesc"><a name="CR_SplitChannels"></a><span class="term"><a name="node.ndprocessingconversions.channels.splitchannels"></a><a name="CR_SplitChannelsX"></a>ND Processing &amp; Conversions &gt; Channels &gt; Split Channels<button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions.channels.splitchannelsx">ðŸ”—</button></span> <p></p><p>Splits the connected results back to the state before the channel merge.</p></div><div class="varlistentry cdesc"><a name="CR_ChannelToIntensity"></a><span class="term"><a name="node.ndprocessingconversions.channels.channeltointensity"></a><a name="CR_ChannelToIntensityX"></a>ND Processing &amp; Conversions &gt; Channels &gt; Channel to Intensity<button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions.channels.channeltointensityx">ðŸ”—</button></span> <p></p><p>Creates an intensity channel from the connected color source.</p></div><div class="varlistentry cdesc"><a name="CR_BinariesToColor"></a><span class="term"><a name="node.ndprocessingconversions.labelsclasses.binariestocolor"></a><a name="CR_BinariesToColorX"></a>ND Processing &amp; Conversions &gt; Labels &amp; Classes &gt; Binaries to Color<button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions.labelsclasses.binariestocolorx">ðŸ”—</button></span> <p></p><p>Converts multiple binary inputs into a color class image where every pixel belongs to exactly one class defined by its value (zero being background). Binaries are taken one-by-one from A parameter each setting a value (A -&gt; 1, B -&gt; 2, ...) to pixels under the corresponding binary. If binaries overlap the later is preserved.</p></div><div class="varlistentry cdesc"><a name="CR_ColorToBinaries"></a><span class="term"><a name="node.ndprocessingconversions.labelsclasses.colortobinaries"></a><a name="CR_ColorToBinariesX"></a>ND Processing &amp; Conversions &gt; Labels &amp; Classes &gt; Color to Binaries<button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions.labelsclasses.colortobinariesx">ðŸ”—</button></span> <p></p><p>Converts class image into multiple binaries based on the pixel values.</p><div class="variablelist"><dl><div class="varlistentry"><span class="term">Class count</span> <p>Number of binaries created.</p></div></dl></div></div><div class="varlistentry cdesc"><a name="CR_RenderColorToRGB"></a><span class="term"><a name="node.ndprocessingconversions.rendertorgb.color"></a><a name="CR_RenderColorToRGBX"></a>ND Processing &amp; Conversions &gt; Render to RGB &gt; Color<button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions.rendertorgb.colorx">ðŸ”—</button></span> <p></p><p>Connected color image is rendered into a single RGB image.</p></div><div class="varlistentry cdesc"><a name="CR_RenderBinaryToRGB"></a><span class="term"><a name="node.ndprocessingconversions.rendertorgb.binary"></a><a name="CR_RenderBinaryToRGBX"></a>ND Processing &amp; Conversions &gt; Render to RGB &gt; Binary<button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions.rendertorgb.binaryx">ðŸ”—</button></span> <p></p><p>Connected binary image is rendered into a single RGB image.</p></div><div class="varlistentry cdesc"><a name="CR_RenderColorAndBinaryToRGB"></a><span class="term"><a name="node.ndprocessingconversions.rendertorgb.overlay"></a><a name="CR_RenderColorAndBinaryToRGBX"></a>ND Processing &amp; Conversions &gt; Render to RGB &gt; Overlay<button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions.rendertorgb.overlayx">ðŸ”—</button></span> <p></p><p>Overlay of the connected color (bottom) and binary layer (top) is rendered into a single RGB image.</p></div><div class="varlistentry cdesc"><a name="CR_RenderGraphToRGB"></a><span class="term"><a name="node.ndprocessingconversions.rendertorgb.graph"></a><a name="CR_RenderGraphToRGBX"></a>ND Processing &amp; Conversions &gt; Render to RGB &gt; Graph<button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions.rendertorgb.graphx">ðŸ”—</button></span> <p></p><p>Graph is rendered into a single RGB image.</p></div><div class="varlistentry cdesc"><a name="CR_RenderFrame"></a><span class="term"><a name="node.ndprocessingconversions.rendertotable.renderframe"></a><a name="CR_RenderFrameX"></a>ND Processing &amp; Conversions &gt; Render to Table &gt; Render Frame<button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions.rendertotable.renderframex">ðŸ”—</button></span> <p></p><p>Renders Channel A and Binaries B1, ..., Bn and stores it in the table as a row. If Filter is connected to a table it renders only frames present in the table.</p><div class="variablelist"><dl><div class="varlistentry"><span class="term">Source Rect</span> <p>Defines the size (in microns if calibrated) of the center portion of the frame that is cropped and rendered.</p></div><div class="varlistentry"><span class="term">Maximum Size</span> <p>Maximum Size (in pixels) is a limit to which the rendered image is stretched down if being bigger.</p></div></dl></div></div><div class="varlistentry cdesc"><a name="CR_RenderObjects"></a><span class="term"><a name="node.ndprocessingconversions.rendertotable.renderobjects"></a><a name="CR_RenderObjectsX"></a>ND Processing &amp; Conversions &gt; Render to Table &gt; Render Objects<button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions.rendertotable.renderobjectsx">ðŸ”—</button></span> <p></p><div class="variablelist"><dl><div class="varlistentry"><span class="term">Rendered Size</span> <p>Size of the rendered image.</p></div><div class="varlistentry"><span class="term">Format &amp; Quality</span> <p>Specifies the Image file format (jpg or png) and image quality in [%].</p></div><div class="varlistentry"><span class="term">Auto-contrast</span> <p></p></div><div class="varlistentry"><span class="term">Binary Opacity</span> <p></p></div></dl></div></div><div class="varlistentry cdesc"><a name="CR_ConvertRgbToIntensity"></a><span class="term"><a name="node.ndprocessingconversions.rgb.rgbtointensity"></a><a name="CR_ConvertRgbToIntensityX"></a>ND Processing &amp; Conversions &gt; RGB &gt; RGB to Intensity<button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions.rgb.rgbtointensityx">ðŸ”—</button></span> <p></p><p>Converts the connected RGB result into an intensity channel.</p></div><div class="varlistentry cdesc"><a name="CR_ConvertRgbToHsi"></a><span class="term"><a name="node.ndprocessingconversions.rgb.rgbtohsi"></a><a name="CR_ConvertRgbToHsiX"></a>ND Processing &amp; Conversions &gt; RGB &gt; RGB to HSI<button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions.rgb.rgbtohsix">ðŸ”—</button></span> <p></p><p>Converts the connected RGB result to its HSI representation.</p></div><div class="varlistentry cdesc"><a name="CR_ConvertHsiToRgb"></a><span class="term"><a name="node.ndprocessingconversions.rgb.hsitorgb"></a><a name="CR_ConvertHsiToRgbX"></a>ND Processing &amp; Conversions &gt; RGB &gt; HSI to RGB<button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions.rgb.hsitorgbx">ðŸ”—</button></span> <p></p><p>Converts the connected HSI result to its standard RGB representation.</p></div><div class="varlistentry cdesc"><a name="CR_ND_MakeQPI"></a><span class="term"><a name="node.ndprocessingconversions.volumecontrast.volumecontrast"></a><a name="CR_ND_MakeQPIX"></a>ND Processing &amp; Conversions &gt; Volume Contrast &gt; Volume Contrast<button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions.volumecontrast.volumecontrastx">ðŸ”—</button></span> <p></p><p>Creates a Volume Contrast image from the connected color image. Set the <span class="guilabel">Wavelength</span> of the connected sample image (<img src="../res/base/reset.png" height="12.5"> reset button returns the default value) and define the <span class="guilabel">Well surface</span> and <span class="guilabel">Background level</span> values. Recommended values can be added using the button on the right.</p></div><div class="varlistentry cdesc"><a name="CR_Seg_TemplateMatching"></a><span class="term"><a name="node.ndprocessingconversions.goldensample.match"></a><a name="CR_Seg_TemplateMatchingX"></a>ND Processing &amp; Conversions &gt; Golden Sample &gt; Match<button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions.goldensample.matchx">ðŸ”—</button></span> <p></p><p>After connecting this node to the template image (Image) to be matched and the golden sample (Template), it can be used for adjusting the <a class="ulink" href="https://en.wikipedia.org/wiki/Template_matching" target="_blank">Template Matching</a> parameters such as the minimal similarity, minimal/maximal angle, maximal number of matches, maximal overlap, or maximal downsampling.</p></div><div class="varlistentry cdesc"><a name="CR_Seg_DrawTemplateMatchRectangles"></a><span class="term"><a name="node.ndprocessingconversions.goldensample.draw"></a><a name="CR_Seg_DrawTemplateMatchRectanglesX"></a>ND Processing &amp; Conversions &gt; Golden Sample &gt; Draw<button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions.goldensample.drawx">ðŸ”—</button></span> <p></p><p>Adjusts the parameters for the template matching binary layer such as the X and Y center position, width/height, angle, and units.</p></div><div class="varlistentry cdesc"><a name="CR_Python_GenericNode"></a><span class="term"><a name="node.ndprocessingconversions.pythonscripting.python"></a><a name="CR_Python_GenericNodeX"></a>ND Processing &amp; Conversions &gt; Python Scripting &gt; Python<button class="xmlid" data-clipboard-text="id|node.ndprocessingconversions.pythonscripting.pythonx">ðŸ”—</button>, </span><span class="term"><a name="node.ndprocessingconversions.pythonscripting.python.3d"></a><a name="CR_Python_GenericNodeX"></a>ND Processing &amp; Conversions &gt; Python Scripting &gt; Python <img src="../img/icons/mtype_3d.png" height="12.5"></span> <p></p><p><a class="ulink" href="https://www.python.org/" target="_blank">Python</a> 3.12 is <a class="ulink" href="https://docs.python.org/3/extending/embedding.html" target="_blank">embedded</a> inside <span class="productname">NIS-Elements</span> in such a way that <span class="productname">NIS-Elements</span> can call the python interpreter and pass python code to it.</p><p>The python program and all its modules live in <span class="productname">NIS-Elements</span> folder so that it does not contaminate host environment that may be using different version of Python:</p><pre class="synopsis">C:\Program Files\NIS Elements\Python\
</pre><p>Furthermore, two bat files pip.bat and python.bat exist in <span class="productname">NIS-Elements</span> folder to enable interacting with the python.</p><div class="orderedlist"><p class="title"><b>Installing packages using pip</b></p><p>Python packages can be managed using pip from the <span class="productname">NIS-Elements</span> folder.</p><ol class="orderedlist" type="1"><li class="listitem"><p>Change directory to <span class="productname">NIS-Elements</span>.</p><pre class="synopsis">CD \Program Files\NIS Elements
</pre></li><li class="listitem"><p>Install package using pip.bat.</p><pre class="synopsis">pip.bat install &lt;package&gt; 
</pre><p>or (alternatively pip can be called using python.bat)</p><pre class="synopsis">python.bat -m pip install &lt;package&gt;
</pre></li><li class="listitem"><p>Run the interpreter and try to import the package.</p><pre class="synopsis">python.bat
&gt;&gt;&gt; import &lt;package&gt;
</pre></li></ol></div><div class="variablelist"><p class="title"><b>Upgrading pip</b></p><dl><div class="varlistentry"><span class="term"></span> <p>Be careful and call .\python.exe from the <span class="productname">NIS-Elements</span> Python folder to be sure to upgrade the local <span class="productname">NIS-Elements</span> pip not the system pip.</p><pre class="synopsis">CD \Program Files\NIS Elements\Python
.\python.exe -m pip install --upgrade pip
</pre></div></dl></div><div class="variablelist"><p class="title"><b>Troubleshooting pip</b></p><dl><div class="varlistentry"><span class="term"></span> <p>When pip.bat is not working:</p><p>Solution 1: instead use </p><pre class="synopsis">python.bat -m pip install &lt;package&gt;</pre><p>Solution 2: bootstrap pip</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Call the bootstrappip.bat from NIS-Elements\Python folder.</p></li><li class="listitem"><p>Check pip.bat from C:\Program Files\NIS Elements\ and if successful end here. Otherwise continue with the steps below.</p></li><li class="listitem"><p>Go to NIS Elements Python folder C:\Program Files\NIS Elements\Python</p></li><li class="listitem"><p>Delete pip*.exe (pip.exe, pip3.exe, pip3.12.exe) from Scripts folder if present.</p></li><li class="listitem"><p>Delete pip and pip-XX.Y.Z.dist-info (e.g. pip-23.2.1.dist-info) from Lib\site-packages if present.</p></li><li class="listitem"><p>From C:\Program Files\NIS Elements\Python call </p><pre class="synopsis">.\python.exe -m ensurepip --default-pip</pre></li><li class="listitem"><p>Check pip.bat from C:\Program Files\NIS Elements\</p></li></ol></div></div></dl></div><div class="variablelist"><p class="title"><b>Python stdout - where print() text goes</b></p><dl><div class="varlistentry"><span class="term"></span> <p><span class="productname">NIS-Elements</span> installs hook to both python stderr and stdout and routes it to the Log file. To see it go to <a class="link" href="help.menu.html#menu.help.openlogfile"><span class="emphasis"><em><img src="../assets/main_menu.png"> Help &gt; Open Log File</em></span></a><a name="d0e68992"></a>).</p></div></dl></div><div class="variablelist"><dl><div class="varlistentry"><span class="term">Python nodes in GA3</span> <p></p></div></dl></div><p>There are two Python nodes. 2D node operates on frame data and a 3D node operates on volume data. They share the same look and behavior and appear empty when inserted into GA3.</p><div class="sidebar"><div class="figure"><a data-toggle="lightbox" data-gallery="default" href="../img/eng/ga3_action_python_01.png" title="" data-title=" "><img class="img-responsive" src="../img/eng/ga3_action_python_01.png" alt="../img/eng/ga3_action_python_01.png image"></a><p class="title"><b>Figure&nbsp;725.&nbsp;</b></p></div></div><p>The nodes allow for any number and type of inputs and outputs. Inputs and outputs can be added and removed by buttons on the toolbar. The tooltip on both inputs and outputs suggests how to access it in the code (e.g. inp[0], out[1]).</p><div class="sidebar"><div class="figure"><a data-toggle="lightbox" data-gallery="default" href="../img/eng/ga3_action_python_02.png" title="" data-title=" "><img class="img-responsive" src="../img/eng/ga3_action_python_02.png" alt="../img/eng/ga3_action_python_02.png image"></a><p class="title"><b>Figure&nbsp;726.&nbsp;</b></p></div></div><p>The default script looks like this:</p><pre class="synopsis"># IMPORTANT: 'limnode' must be imported like this (not from nor as)
import limnode

# defines output parameter properties
def output(inp: tuple[limnode.AnyInDef], out: tuple[limnode.AnyOutDef]) -&gt; None:
    pass

# return Program for dimension reduction or two-pass processing
def build(loops: list[limnode.LoopDef]) -&gt; limnode.Program|None:
    return None

# called for each frame/volume
def run(inp: tuple[limnode.AnyInData], out: tuple[limnode.AnyOutData], ctx: limnode.RunContext) -&gt; None:
    pass

# child process initialization (when outproc is set)
if __name__ == '__main__':
    limnode.child_main(run, output, build) 
</pre><p>There are three functions that define</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>what is the node output output(...),</p></li><li class="listitem"><p>how each frame/volume is processed run(...) and</p></li><li class="listitem"><p>how the run is called build(...)</p></li></ul></div><p>All important details can be seen in the limnode.py inside C:\Program Files\NIS Elements\Python\Lib\site-packages.</p><div class="variablelist"><dl><div class="varlistentry"><span class="term">output() function</span> <p>The purpose of this function is to define all aspects of output parameters by modifying out tuple items.</p><p>Output() is typically called before the run of GA3 after some user change upstream the graph. The information provided is used by the downstream nodes in GUI and run (for example table columns defined here are listed dependent nodes).</p><p>In GA3 output parameters can have assigned input or can be create new output. When they have assigned input, they inherit name, color and the number of components from that input. The output changes as the input gets reconnected. New outputs however, must be fully defined.</p><p>For assigning all output items have assign(...) method which takes input of the same type. For creating new output there are dedicated makeNew*(...) methods. All these methods return self and can be safely concatenated.</p><p>By default the node tries to assign to every output the first input of the same type. It this is not possible a new output is made.</p><p>Here is a summary of the methods:</p><pre class="synopsis">class OutputChannelDef:
    def assign(self, param: InputChannelDef) -&gt; OutputChannelDef:
        ...
    def makeNewMono(self, name: str, color: AnyColorDef) -&gt; OutputChannelDef:
        ...
    def makeNewRgb(self, name: str|None = None) -&gt; OutputChannelDef:
        ...
    # change bitdepth
    def makeFloat(self) -&gt; OutputChannelDef:
        ...
    def makeUInt16(self) -&gt; OutputChannelDef:
        ...
    def makeUInt8(self) -&gt; OutputChannelDef:
        ...

class OutputBinaryDef:
    def assign(self, param: InputBinaryDef) -&gt; OutputBinaryDef:
        ...
    def makeNew(self, name: str, color: AnyColorDef) -&gt; OutputBinaryDef:
        ...
    # change bitdepth
    def makeInt32(self) -&gt; OutputBinaryDef:
        ...
    def makeUInt8(self) -&gt; OutputBinaryDef:
        ...

class OutputTableDef:
    def assign(self, param: InputTableDef) -&gt; OutputTableDef:
        ...
    # new empty table
    def makeEmpty(self, name: str) -&gt; OutputTableDef:
        ...
    # optional InputTableDef to copy columns from or if None add just loopCols
    def makeNew(self, name: str, param: InputTableDef|None = None) -&gt; OutputTableDef:
        ...
    # to add all necessary loop columns
    def withLoopCols(self) -&gt; OutputTableDef:
        ...
    # to add Entity and ObjectID columns
    def withObjectCols(self) -&gt; OutputTableDef:
        ...
    # and arbitrary data columns based on type
    def withIntCol(self, title: str, unit: str|None = None, feature:str|None = None, id: str|None = None) -&gt; OutputTableDef:
        ...
    def withFloatCol(self, title: str, unit: str|None = None, feature:str|None = None, id: str|None = None) -&gt; OutputTableDef:
        ...
    def withStringCol(self, title: str, unit: str|None = None, feature:str|None = None, id: str|None = None) -&gt; OutputTableDef:
        ...
</pre></div><div class="varlistentry"><span class="term">Channels and binaries</span> <p>Example of assigning an input channel to output and changing it to float:</p><pre class="synopsis">def output(inp: tuple[limnode.AnyInDef], out: tuple[limnode.AnyOutDef]) -&gt; None:
    out[0].assign(inp[0]).makeFloat()
</pre><p>Example of creating a new YFP (yellow) 16bit channel:</p><pre class="synopsis">def output(inp: tuple[limnode.AnyInDef], out: tuple[limnode.AnyOutDef]) -&gt; None:
    out[0].makeNewMono('YFP', "#FFFF00").makeUInt16() # color can be a RGB tuple too: (255, 255, 0)
</pre></div><div class="varlistentry"><span class="term">Tables</span> <p>Example of adding two columns to an output table:</p><pre class="synopsis">
# by making new the table has only loop columns and the two columns added to it
def output(inp: tuple[limnode.AnyInDef], out: tuple[limnode.AnyOutDef]) -&gt; None:
    unit_x, unit_y, _ = inp[0].units # inp[0] is InputChannelDef or InputBinaryDef
    out[0].makeNew("Records").withFloatCol("X coord", unit_x).withFloatCol("Y coord", unit_y)

# by assigning the table gets all columns from inp[0] and a new Ratio column of type float
def output(inp: tuple[limnode.AnyInDef], out: tuple[limnode.AnyOutDef]) -&gt; None:
    out[0].assign(inp[0]).withFloatCol("Ratio")    
</pre></div><div class="varlistentry"><span class="term">build() function</span> <p>It is called before run to enquire hew to call the run method. By default it returns None to indicate that run(...) will be called for each frame/volume once.</p><p>Other two possibilities are for:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>stack reduction, and</p></li><li class="listitem"><p>two-pass algorithms</p></li></ul></div><p>For stack reduction return ReduceProgram(...) with appropriate loop overZStack() or overTimeLapse() method.</p><pre class="synopsis">def build(loops: list[limnode.LoopDef]) -&gt; limnode.Program|None:
    return limnode.ReduceProgram(loops).overZStack()
</pre><p>For two-pass algorithms return TwoPassProgram(...) with appropriate loop overZStack() or overTimeLapse() method.</p><pre class="synopsis">def build(loops: list[limnode.LoopDef]) -&gt; limnode.Program|None:
    return limnode.TwoPassProgram(loops).overZStack()
</pre></div><div class="varlistentry"><span class="term">run() function</span> <p>It is called for every frame/volume (depending on build(...) return value) to fill the data of each out item.</p><div class="variablelist"><dl><div class="varlistentry"><span class="term">Channels and binaries</span> <p>For OutputChannelData and OutputBinaryData the data property is a numpy ndarry of shape (z, y, x, comps) and dtype defined by output() function. By default it is filled with zeros.</p><pre class="synopsis"># to simply multiply the input by factor of two
def run(inp: tuple[limnode.AnyInData], out: tuple[limnode.AnyOutData], ctx: limnode.RunContext) -&gt; None:
    out[0].data[:] = inp[0].data[:] * 2
</pre></div><div class="varlistentry"><span class="term">Tables</span> <p>For OutputTableData the data property is a table (type LimTableDataBase defined in limtabledata.py). Table columns are defined by output function(). By default the table is empty (there is no data in any column).</p><pre class="synopsis"># for more columns at once
def run(inp: tuple[limnode.AnyInData], out: tuple[limnode.AnyOutData], ctx: limnode.RunContext) -&gt; None:
    out[0].withColData(["X coord", "Y coord"], [ [0.0, 0.5], [0.0, 0.5] ])  # list, list[list]

# for inp[0] being an assigned (has same columns) InputTableData
def run(inp: tuple[limnode.AnyInData], out: tuple[limnode.AnyOutData], ctx: limnode.RunContext) -&gt; None:
    a, b = inp[0].colArray(["MeanOfDiO", "MeanOfDiI"])
    out[0].withColDataFrom(inp[0]).withColData("Ratio", a/b)
</pre><p>Each item has prefilled recdata (of type LimTableDataBase) with per-frame recorded data (e.g. AcqTime, X, Y, Z, ...) which can be altered.</p><div class="note"><h3 class="title">Note</h3><p>The columns in colArray() and withColData() are regular experssions (columns are looked up using re.search(colname)). Thus, for exact match use "^colname$" (see colIndexByPattern()in limtabledata.py).</p></div></div><div class="varlistentry"><span class="term">The context</span> <p>The context ctx provides more information about the current run:</p><pre class="synopsis">@dataclass(kw_only=True)
class RunContext:
    inpFilename: str                            # full input filename
    outFilename: str                            # full output filename (typically same as inpFilename except in Cluster Computing)
    inpParameterCoordinates: tuple[tuple[int]]  # loop coordinates for every input parameter 
    outCoordinates: tuple[int]                  # output loop coordinates
    reducingCoordinateIndexes: tuple[int]|None  # loop of loops being reduced or None when not reducing
    finalCall: bool                             # when out should be filled (when false out.data and recdata are set to None)

    @property
    def shouldAbort(self) -&gt; bool:              # abort is requested
        ...
</pre><p>ctx.shouldAbort should be checked whenever possible. However, it is not possible to abort calls into libraries. In such cases switch out of process execution ON.</p></div><div class="varlistentry"><span class="term">Reduce</span> <p>When ReduceProgram was returned in build() the run() function must fill the out items only when ctx.lastCall == True.</p><p>Before lastCall it is expected to accumulate the result like in this maximum intensity example:</p><pre class="synopsis"># IMPORTANT: 'limnode' must be imported like this (not from nor as)
import limnode, numpy as np

tmp = None

# defines output parameter properties
def output(inp: tuple[limnode.AnyInDef], out: tuple[limnode.AnyOutDef]) -&gt; None:
    out[0].makeNewMono("DiY", (0, 0, 255))

# return Program for dimension reduction or two-pass processing
def build(loops: list[limnode.LoopDef]) -&gt; limnode.Program|None:
    return limnode.ReduceProgram(loops).overZStack()

# called for each frame/volume
def run(inp: tuple[limnode.AnyInData], out: tuple[limnode.AnyOutData], ctx: limnode.RunContext) -&gt; None:
    global tmp
    if tmp is None:
        tmp = np.zeros(inp[0].data.shape, inp[0].data.dtype)
    tmp = np.maximum(tmp, inp[0].data)
    if ctx.finalCall:
        out[0].data[:] = tmp

# child process initialization (when outproc is set)
if __name__ == '__main__':
    limnode.child_main(run, output, build)
</pre></div><div class="varlistentry"><span class="term">Two-passes</span> <p>When TwoPassProgram was returned in build() the run() function must fill the out items only when ctx.lastCall == True. The run can monitor the frame/volume being processed in ctx.inpParameterCoordinates and ctx.reducingCoordinateIndexes. During first pass the node analyses data and then during second pass if fills the out items.</p><p>In the example below the node accumulates a maximum intensity projection in the first pass and during the second pass it subtracts current frame from it:</p><pre class="synopsis">import limnode, numpy as np

tmp = None

# defines output parameter properties
def output(inp: tuple[limnode.AnyInDef], out: tuple[limnode.AnyOutDef]) -&gt; None:
    out[0].assign(inp[0])

# return Program for dimension reduction or two-pass processing
def build(loops: list[limnode.LoopDef]) -&gt; limnode.Program|None:
    return limnode.TwoPassProgram(loops).overZStack()

# called for each frame/volume
def run(inp: tuple[limnode.AnyInData], out: tuple[limnode.AnyOutData], ctx: limnode.RunContext) -&gt; None:
    global tmp
    if tmp is None:
        tmp = np.zeros(inp[0].data.shape, inp[0].data.dtype)
    if ctx.finalCall:
        out[0].data[:] = tmp - inp[0].data[:]
    else:
        tmp = np.maximum(tmp, inp[0].data)   

# child process initialization (when outproc is set)
if __name__ == '__main__':
    limnode.child_main(run, output, build) 
</pre><div class="important"><h3 class="title">Important</h3><p>All numpy.ndarray data properties are valid only during the particular run. If the algorithm has to to store it in a variable it has to make a copy of it.</p><p>tmp = numpy.copy(unp[0].data[0, :, :, 0])</p></div></div></dl></div></div><div class="varlistentry"><span class="term">Out of process run</span> <p>Many times the required python modules are incompatible with <span class="productname">NIS-Elements</span> or lengthy operation dictate the need for out of process execution. In such scenario all three functions output, build and run are called in a separate process. Specifically the C:\Program Files\NIS Elements\Python\pythonw.exe is and the script is passed to it. All calls are forwarded to that process.</p><p>For details see limnode.py.</p></div><div class="varlistentry"><span class="term">Examples</span> <p></p><div class="variablelist"><dl><div class="varlistentry"><span class="term">Using scikit-image for Otsu segmentation</span> <p>This example will show how to install an additional package (skimage) and use it for basic segmentation.</p><p>Install the package using pip.bat and check that it is installed and can be imported using python.bat:</p><pre class="synopsis">CD \Program Files\NIS Elements
pip.bat install scikit-image
python.bat
&gt;&gt;&gt; import skimage
</pre><p>Open the C:\Program Files\NIS-Elements\Images\agnor.tif.</p><p>In <span class="productname">NIS-Elements</span> GA3 Editor:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Drag the Python node (in the ND Processing &amp; Conversions section) into the graph.</p></li><li class="listitem"><p>Open the node settings dialog by clicking on the <span class="guibutton">...</span> and add one color input <img src="../res/coregui/ga3/nodeinputcolor.png" height="12.5"> and one binary output <img src="../res/coregui/ga3/nodeoutputbinary.png" height="12.5">.</p></li><li class="listitem"><p>Connect the input pin to the blue channel.</p></li><li class="listitem"><p>Connect the output pin to the SaveBinaries node.</p></li><li class="listitem"><p>Paste the code below inside the dialog.</p></li></ol></div><div class="sidebar"><div class="figure"><a data-toggle="lightbox" data-gallery="default" href="../img/eng/ga3_action_python_03.png" title="" data-title=" "><img class="img-responsive" src="../img/eng/ga3_action_python_03.png" alt="../img/eng/ga3_action_python_03.png image"></a><p class="title"><b>Figure&nbsp;727.&nbsp;</b></p></div></div><pre class="synopsis"># IMPORTANT: 'limnode' must be imported like this (not from nor as)
import limnode, numpy
from skimage import filters

# defines output parameter properties
def output(inp: tuple[limnode.AnyInDef], out: tuple[limnode.AnyOutDef]) -&gt; None:
    out[0].makeNew("otsu", (0, 255, 255))

# return Program for dimension reduction or two-pass processing
def build(loops: list[limnode.LoopDef]) -&gt; limnode.Program|None:
    return None

# called for each frame/volume
def run(inp: tuple[limnode.AnyInData], out: tuple[limnode.AnyOutData], ctx: limnode.RunContext) -&gt; None:
    image = inp[0].data[0, :, :, 0]
    threshold = filters.threshold_otsu(image)
    binary = image &lt; threshold
    out[0].data[0, :, :, 0] = binary.astype(numpy.uint8)

# child process initialization (when outproc is set)
if __name__ == '__main__':
    limnode.child_main(run, output, build) 
</pre><p>The code:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Imports filters from the skimage package.</p></li><li class="listitem"><p>In the output() function defines the output to be a new binary named <span class="quote">â€œ<span class="quote">otsu</span>â€</span> and cyan color (0, 255, 255) or <span class="quote">â€œ<span class="quote">#00FFFF</span>â€</span>.</p></li><li class="listitem"><p>In the run() function:</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p>takes the image from the inp array,</p></li><li class="listitem"><p>calculates the threshold calling threshold_otsu,</p></li><li class="listitem"><p>creates the binary by directly comparing the values from the image with the threshold value (in this example objects are dark), and</p></li><li class="listitem"><p>sets the binary data into the out array while converting to the proper format (uint8 or int32 for binary IDs).</p></li></ol></div></li></ol></div><p>The resulting thresholded binary image should look like this:</p><div class="sidebar"><div class="figure"><a data-toggle="lightbox" data-gallery="default" href="../img/eng/ga3_action_python_04.png" title="" data-title=" "><img class="img-responsive" src="../img/eng/ga3_action_python_04.png" alt="../img/eng/ga3_action_python_04.png image"></a><p class="title"><b>Figure&nbsp;728.&nbsp;</b></p></div></div></div><div class="varlistentry"><span class="term">Using Cellpose for segmentation</span> <p>Cellpose is well known package for cellular segmentation (see <a class="ulink" href="https://www.cellpose.org/" target="_blank">cellpose.org</a>).</p><p>First install the cellpose module:</p><pre class="synopsis">C:\Program Files\NIS Elements&gt;pip.bat install cellpose[gui]
</pre><p>In <span class="productname">NIS-Elements</span> open an image, insert python node and set it up for segmentation (one channel input and one binary output) like so:</p><div class="sidebar"><div class="figure"><a data-toggle="lightbox" data-gallery="default" href="../img/eng/ga3_action_python_05.png" title="" data-title=" "><img class="img-responsive" src="../img/eng/ga3_action_python_05.png" alt="../img/eng/ga3_action_python_05.png image"></a><p class="title"><b>Figure&nbsp;729.&nbsp;</b></p></div></div><p>Because the libraries used by cellpose collide with <span class="productname">NIS-Elements</span>, make sure to switch ON the Run out of process.</p><p>Then edit the python code as follow:</p><pre class="synopsis"># IMPORTANT: 'limnode' must be imported like this (not from nor as)
import limnode, numpy
from cellpose import models

model = models.Cellpose(model_type='cyto3')

# defines output parameter properties
def output(inp: tuple[limnode.AnyInDef], out: tuple[limnode.AnyOutDef]) -&gt; None:
    out[0].makeNew("cell", (0, 255, 255))

# return Program for dimension reduction or two-pass processing
def build(loops: list[limnode.LoopDef]) -&gt; limnode.Program|None:
    return None

# called for each frame/volume
def run(inp: tuple[limnode.AnyInData], out: tuple[limnode.AnyOutData], ctx: limnode.RunContext) -&gt; None:
    masks, flows, styles, diams = model.eval(inp[0].data[0, :, :, 0])
    out[0].data[0, :, :, 0] = masks.astype(numpy.uint8)

# child process initialization (when outproc is set) 
if __name__ == '__main__':
    limnode.child_main(run, output, build) 
</pre><p>And see the results:</p><div class="sidebar"><div class="figure"><a data-toggle="lightbox" data-gallery="default" href="../img/eng/ga3_action_python_06.png" title="" data-title=" "><img class="img-responsive" src="../img/eng/ga3_action_python_06.png" alt="../img/eng/ga3_action_python_06.png image"></a><p class="title"><b>Figure&nbsp;730.&nbsp;</b></p></div></div><p>All imports and processing defined in global scope is often run by GA3 editor and can result in frequent freezing of GA3 editor. To make GA3 editor more responsible, try to hide these in functions.</p><p>Here is short example how to rewrite Cellpose segmentation to make editor more responsive.</p><pre class="synopsis"># IMPORTANT: 'limnode' must be imported like this (not from nor as)
import limnode

model = None

# defines output parameter properties
def output(inp: tuple[limnode.AnyInDef], out: tuple[limnode.AnyOutDef]) -&gt; None:
    out[0].makeNew("cell", (0, 255, 255))

# return Program for dimension reduction or two-pass processing
def build(loops: list[limnode.LoopDef]) -&gt; limnode.Program|None:
    return None

# called for each frame/volume
def run(inp: tuple[limnode.AnyInData], out: tuple[limnode.AnyOutData], ctx: limnode.RunContext) -&gt; None:
    import numpy
    from cellpose import models
    
    global model
    if model is None:
        model = models.Cellpose(model_type='cyto3')
    
    masks, flows, styles, diams = model.eval(inp[0].data[0, :, :, 0])
    out[0].data[0, :, :, 0] = masks.astype(numpy.uint8) 

# child process initialization (when outproc is set) 
if __name__ == '__main__':
    limnode.child_main(run, output, build) </pre><p>All imports except limnode are moved to function 'run' as its only place where they are needed. Global variable <span class="quote">â€œ<span class="quote">model</span>â€</span> is initially assigned to None and is reassigned in <span class="quote">â€œ<span class="quote">run</span>â€</span>.</p></div><div class="varlistentry"><span class="term">Using the BaSiCPy for shading removal</span> <p>BaSiCPy is a library "for background and shading correction of optical microscopy images" (see <a class="ulink" href="https://github.com/peng-lab/BaSiCPy" target="_blank">BaSiCPy @ github.com</a>).</p><p>First install the basicpy module:</p><pre class="synopsis">C:\Program Files\NIS Elements&gt;pip.bat install basicpy
</pre><p>Setup the node for processing by adding Channel input and output. It is not necessary to run BaSiC in different process.</p><p>The python con be written like so:</p><pre class="synopsis"># IMPORTANT: 'limnode' must be imported like this (not from nor as)
import limnode, numpy
from basicpy import BaSiC

basic = BaSiC(get_darkfield=True)
fitted: bool = False
imgcache: list[numpy.ndarray] = []

# defines output parameter properties  
def output(inp: tuple[limnode.AnyInDef], out: tuple[limnode.AnyOutDef]) -&gt; None:  
   pass

# return Program for dimension reduction or two-pass processing
def build(loops: list[limnode.LoopDef]) -&gt; limnode.Program|None:
   return limnode.TwoPassProgram(loops).overMultiPoint()  

# called for each frame/volume
def run(inp: tuple[limnode.AnyInData], out: tuple[limnode.AnyOutData], ctx: limnode.RunContext) -&gt; None:
   global imgcache, fitted, basic
   if ctx.finalCall:
       if not fitted:
           stk = numpy.stack(imgcache, axis=0)
           basic.fit(stk)
           imgcache = []
           fitted = True
       out[0].data[0, :, :, 0] = basic.transform(inp[0].data[0, :, :, 0])[0]
   else:
       imgcache.append(numpy.copy(inp[0].data[0, :, :, 0]))
       fitted = False

# child process initialization (when outproc is set)  
if __name__ == '__main__':
   limnode.child_main(run, output, build)   
</pre><p>The result looks like this:</p><div class="sidebar"><div class="figure"><a data-toggle="lightbox" data-gallery="default" href="../img/eng/ga3_action_python_07.png" title="" data-title=" "><img class="img-responsive" src="../img/eng/ga3_action_python_07.png" alt="../img/eng/ga3_action_python_07.png image"></a><p class="title"><b>Figure&nbsp;731.&nbsp;</b></p></div></div></div></dl></div></div></dl></div></div></dl></div></div><div class="footer"><a href="http://www.laboratory-imaging.com" class="footer" target="_blank">Copyright 1991-2025 Laboratory Imaging s.r.o.</a></div><div style="height:30%;width:100%;"></div> </div> <!-- /#main --> </div> </div> </body> </html>
