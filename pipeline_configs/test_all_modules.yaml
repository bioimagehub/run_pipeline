run:
- name: Convert T10C2_Phaffin-M4K to tif
  environment: convert_to_tif
  commands:
  - python
  - ./standard_code/python/convert_to_tif.py
  - --input-search-pattern: ./input_T10C2_Phaffin-M4K
  - --collapse-delimiter: __
- name: Convert C4 cyt/nuc folder to tif (no projection)
  environment: convert_to_tif
  commands:
  - python
  - ./standard_code/python/convert_to_tif.py
  - --input-search-pattern: ./input_C4_cyt1_cyt2_cyt3_nuc
  - --collapse-delimiter: __
- name: Merge channels for Cellpose (cyt=sum of 0,1,2; nuc=3)
  environment: convert_to_tif
  commands:
  - python
  - ./standard_code/python/merge_channels.py
  - --input-search-pattern: ./input_C4_cyt1_cyt2_cyt3_nuc_tif/*.tif
  - --output-folder: ./cellpose_input/merged
  - --merge-channels: '[[0,1,2],[3]]'
- name: Run Cellpose on cytoplasm (chan=0, chan2=1)
  environment: cellpose3
  commands:
  - cellpose
  - --dir: ./cellpose_input/merged
  - --savedir: ./cellpose_cyt
  - --channel_axis: 0
  - --use_gpu
  - --save_tif
  - --chan: 0
  - --chan2: 1
  - --pretrained_model: cyto2_cp3
  - --diameter: 300
  - --cellprob_threshold: -4
  - --exclude_on_edges
  - --verbose
- name: Run Cellpose on nucleus (chan=1 only)
  environment: cellpose3
  commands:
  - cellpose
  - --dir: ./cellpose_input/merged
  - --savedir: ./cellpose_nuc
  - --channel_axis: 0
  - --use_gpu
  - --save_tif
  - --save_rois
  - --chan: 1
  - --chan2: 0
  - --pretrained_model: nuclei
  - --diameter: 250
  - --exclude_on_edges
  - --verbose
- name: Convert C2Z38 ER-FA to tif (no projection)
  environment: convert_to_tif
  commands:
  - python
  - ./standard_code/python/convert_to_tif.py
  - --input-search-pattern: ./input_C2Z38_ER-FA
  - --collapse-delimiter: __
- name: Segment with Nellie on ER-FA
  environment: nellie
  commands:
  - python
  - ./standard_code/python/segment_nellie.py
  - --input-search-pattern: ./input_C2Z38_ER-FA_tif/*.tif
  - --output-dir: ./nellie_output
  - --ch: 0
