pipeline_name: Pipeline
_designer_metadata:
    nodes:
        - id: 57eb0afe-d144-4fc5-94cc-c89c782473d5
          position:
            x: 0
            "y": 165
          size:
            width: 300
            height: 150
        - id: 37cc4215-c230-454f-bb65-ed935fe09e91
          position:
            x: 435
            "y": 150
          size:
            width: 300
            height: 150
    connections:
        - id: reactflow__edge-57eb0afe-d144-4fc5-94cc-c89c782473d5e6c2f89f-010a-4165-8052-2dec19346ab9-37cc4215-c230-454f-bb65-ed935fe09e91c3e9008a-b5a1-4679-a5ad-4b6e69b653e3
          from_node_id: 57eb0afe-d144-4fc5-94cc-c89c782473d5
          to_node_id: 37cc4215-c230-454f-bb65-ed935fe09e91
          from_socket_id: e6c2f89f-010a-4165-8052-2dec19346ab9
          to_socket_id: c3e9008a-b5a1-4679-a5ad-4b6e69b653e3
run:
    - name: Convert to TIF
      environment: uv@3.11:convert-to-tif
      commands:
        - python
        - standard_code/python/convert_to_tif.py
        - --input-search-pattern: ./input/*.ims
        - --compression: "6"
        - --output-folder: ./output/tifs-test
      script: standard_code/python/convert_to_tif.py
      _node_id: 57eb0afe-d144-4fc5-94cc-c89c782473d5
    - name: Segment with ERnet
      environment: conda:segment_ernet
      commands:
        - python
        - external/ERnet-v2/Inference/inference.py
        - --input-folder: ./output/tifs-test
        - --model-path: ./weights/ernet_model.pth
        - --threshold: "0.5"
        - --output-folder: ./output/masks
      script: external/ERnet-v2/Inference/inference.py
      _node_id: 37cc4215-c230-454f-bb65-ed935fe09e91
